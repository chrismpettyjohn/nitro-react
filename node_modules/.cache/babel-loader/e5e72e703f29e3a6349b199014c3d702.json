{"ast":null,"code":"import { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\nexport class FurnitureBottleVisualization extends FurnitureAnimatedVisualization {\n  constructor() {\n    super();\n    this._stateQueue = void 0;\n    this._running = void 0;\n    this._stateQueue = [];\n    this._running = false;\n  }\n\n  setAnimation(animationId) {\n    if (animationId === -1) {\n      if (!this._running) {\n        this._running = true;\n        this._stateQueue = [];\n\n        this._stateQueue.push(FurnitureBottleVisualization.ANIMATION_ID_ROLL);\n\n        return;\n      }\n    }\n\n    if (animationId >= 0 && animationId <= 7) {\n      if (this._running) {\n        this._running = false;\n        this._stateQueue = [];\n\n        this._stateQueue.push(FurnitureBottleVisualization.ANIMATION_ID_OFFSET_SLOW1);\n\n        this._stateQueue.push(FurnitureBottleVisualization.ANIMATION_ID_OFFSET_SLOW2 + animationId);\n\n        this._stateQueue.push(animationId);\n\n        return;\n      }\n\n      super.setAnimation(animationId);\n    }\n  }\n\n  updateAnimation(scale) {\n    if (this.getLastFramePlayed(0)) {\n      if (this._stateQueue.length) super.setAnimation(this._stateQueue.shift());\n    }\n\n    return super.updateAnimation(scale);\n  }\n\n}\nFurnitureBottleVisualization.ANIMATION_ID_OFFSET_SLOW1 = 20;\nFurnitureBottleVisualization.ANIMATION_ID_OFFSET_SLOW2 = 9;\nFurnitureBottleVisualization.ANIMATION_ID_ROLL = -1;","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/room/object/visualization/furniture/FurnitureBottleVisualization.ts"],"names":["FurnitureAnimatedVisualization","FurnitureBottleVisualization","constructor","_stateQueue","_running","setAnimation","animationId","push","ANIMATION_ID_ROLL","ANIMATION_ID_OFFSET_SLOW1","ANIMATION_ID_OFFSET_SLOW2","updateAnimation","scale","getLastFramePlayed","length","shift"],"mappings":"AAAA,SAASA,8BAAT,QAA+C,kCAA/C;AAEA,OAAO,MAAMC,4BAAN,SAA2CD,8BAA3C,CACP;AAQIE,EAAAA,WAAW,GACX;AACI;AADJ,SAJQC,WAIR;AAAA,SAHQC,QAGR;AAGI,SAAKD,WAAL,GAAmB,EAAnB;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACH;;AAESC,EAAAA,YAAY,CAACC,WAAD,EACtB;AACI,QAAGA,WAAW,KAAK,CAAC,CAApB,EACA;AACI,UAAG,CAAC,KAAKF,QAAT,EACA;AACI,aAAKA,QAAL,GAAgB,IAAhB;AACA,aAAKD,WAAL,GAAmB,EAAnB;;AAEA,aAAKA,WAAL,CAAiBI,IAAjB,CAAsBN,4BAA4B,CAACO,iBAAnD;;AAEA;AACH;AACJ;;AAED,QAAIF,WAAW,IAAI,CAAhB,IAAuBA,WAAW,IAAI,CAAzC,EACA;AACI,UAAG,KAAKF,QAAR,EACA;AACI,aAAKA,QAAL,GAAgB,KAAhB;AACA,aAAKD,WAAL,GAAmB,EAAnB;;AAEA,aAAKA,WAAL,CAAiBI,IAAjB,CAAsBN,4BAA4B,CAACQ,yBAAnD;;AACA,aAAKN,WAAL,CAAiBI,IAAjB,CAAsBN,4BAA4B,CAACS,yBAA7B,GAAyDJ,WAA/E;;AACA,aAAKH,WAAL,CAAiBI,IAAjB,CAAsBD,WAAtB;;AAEA;AACH;;AAED,YAAMD,YAAN,CAAmBC,WAAnB;AACH;AACJ;;AAESK,EAAAA,eAAe,CAACC,KAAD,EACzB;AACI,QAAG,KAAKC,kBAAL,CAAwB,CAAxB,CAAH,EACA;AACI,UAAG,KAAKV,WAAL,CAAiBW,MAApB,EAA4B,MAAMT,YAAN,CAAmB,KAAKF,WAAL,CAAiBY,KAAjB,EAAnB;AAC/B;;AAED,WAAO,MAAMJ,eAAN,CAAsBC,KAAtB,CAAP;AACH;;AAzDL;AADaX,4B,CAEMQ,yB,GAAoC,E;AAF1CR,4B,CAGMS,yB,GAAoC,C;AAH1CT,4B,CAIMO,iB,GAA4B,CAAC,C","sourcesContent":["import { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\r\n\r\nexport class FurnitureBottleVisualization extends FurnitureAnimatedVisualization\r\n{\r\n    private static ANIMATION_ID_OFFSET_SLOW1: number = 20;\r\n    private static ANIMATION_ID_OFFSET_SLOW2: number = 9;\r\n    private static ANIMATION_ID_ROLL: number = -1;\r\n\r\n    private _stateQueue: number[];\r\n    private _running: boolean;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n\r\n        this._stateQueue = [];\r\n        this._running = false;\r\n    }\r\n\r\n    protected setAnimation(animationId: number): void\r\n    {\r\n        if(animationId === -1)\r\n        {\r\n            if(!this._running)\r\n            {\r\n                this._running = true;\r\n                this._stateQueue = [];\r\n\r\n                this._stateQueue.push(FurnitureBottleVisualization.ANIMATION_ID_ROLL);\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n        if((animationId >= 0) && (animationId <= 7))\r\n        {\r\n            if(this._running)\r\n            {\r\n                this._running = false;\r\n                this._stateQueue = [];\r\n\r\n                this._stateQueue.push(FurnitureBottleVisualization.ANIMATION_ID_OFFSET_SLOW1);\r\n                this._stateQueue.push(FurnitureBottleVisualization.ANIMATION_ID_OFFSET_SLOW2 + animationId);\r\n                this._stateQueue.push(animationId);\r\n\r\n                return;\r\n            }\r\n\r\n            super.setAnimation(animationId);\r\n        }\r\n    }\r\n\r\n    protected updateAnimation(scale: number): number\r\n    {\r\n        if(this.getLastFramePlayed(0))\r\n        {\r\n            if(this._stateQueue.length) super.setAnimation(this._stateQueue.shift());\r\n        }\r\n\r\n        return super.updateAnimation(scale);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}