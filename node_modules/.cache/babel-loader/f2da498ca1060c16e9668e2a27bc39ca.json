{"ast":null,"code":"var _jsxFileName = \"/var/www/game.bobba.ca/src/components/purse/PurseView.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { FriendlyTime, HabboClubLevelEnum } from '@nitrots/nitro-renderer';\nimport { useCallback, useMemo } from 'react';\nimport { CreateLinkEvent, GetConfiguration, LocalizeText } from '../../api';\nimport { Column, Flex, Grid, LayoutCurrencyIcon, Text } from '../../common';\nimport { usePurse } from '../../hooks';\nimport { CurrencyView } from './views/CurrencyView';\nimport { SeasonalView } from './views/SeasonalView';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PurseView = props => {\n  _s();\n\n  const {\n    purse = null,\n    hcDisabled = false\n  } = usePurse();\n  const displayedCurrencies = useMemo(() => GetConfiguration('system.currency.types', []), []);\n  const currencyDisplayNumberShort = useMemo(() => GetConfiguration('currency.display.number.short', false), []);\n  const getClubText = useMemo(() => {\n    if (!purse) return null;\n    const totalDays = purse.clubPeriods * 31 + purse.clubDays;\n    const minutesUntilExpiration = purse.minutesUntilExpiration;\n    if (purse.clubLevel === HabboClubLevelEnum.NO_CLUB) return LocalizeText('purse.clubdays.zero.amount.text');else if (minutesUntilExpiration > -1 && minutesUntilExpiration < 60 * 24) return FriendlyTime.shortFormat(minutesUntilExpiration * 60);else return FriendlyTime.shortFormat(totalDays * 86400);\n  }, [purse]);\n  const getCurrencyElements = useCallback(function (offset) {\n    let limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n    let seasonal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (!purse || !purse.activityPoints || !purse.activityPoints.size) return null;\n    const types = Array.from(purse.activityPoints.keys()).filter(type => displayedCurrencies.indexOf(type) >= 0);\n    let count = 0;\n\n    while (count < offset) {\n      types.shift();\n      count++;\n    }\n\n    count = 0;\n    const elements = [];\n\n    for (const type of types) {\n      if (limit > -1 && count === limit) break;\n      if (seasonal) elements.push( /*#__PURE__*/_jsxDEV(SeasonalView, {\n        type: type,\n        amount: purse.activityPoints.get(type)\n      }, type, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 40\n      }, _this));else elements.push( /*#__PURE__*/_jsxDEV(CurrencyView, {\n        type: type,\n        amount: purse.activityPoints.get(type),\n        short: currencyDisplayNumberShort\n      }, type, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 32\n      }, _this));\n      count++;\n    }\n\n    return elements;\n  }, [purse, displayedCurrencies, currencyDisplayNumberShort]);\n  if (!purse) return null;\n  return /*#__PURE__*/_jsxDEV(Column, {\n    className: \"nitro-purse-container\",\n    gap: 1,\n    children: [/*#__PURE__*/_jsxDEV(Flex, {\n      className: \"nitro-purse nitro-notification p-2\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        fullWidth: true,\n        gap: 2,\n        children: [/*#__PURE__*/_jsxDEV(Column, {\n          justifyContent: \"center\",\n          size: hcDisabled ? 8 : 4,\n          gap: 1,\n          children: [/*#__PURE__*/_jsxDEV(CurrencyView, {\n            type: -1,\n            amount: purse.credits,\n            short: currencyDisplayNumberShort\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), getCurrencyElements(0, 2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), !hcDisabled && /*#__PURE__*/_jsxDEV(Column, {\n          center: true,\n          pointer: true,\n          size: 4,\n          gap: 1,\n          className: \"nitro-purse-subscription\",\n          onClick: event => CreateLinkEvent('habboUI/open/hccenter'),\n          children: [/*#__PURE__*/_jsxDEV(LayoutCurrencyIcon, {\n            className: \"club-text\",\n            type: \"hc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            bold: true,\n            className: \"club-text\",\n            children: getClubText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          justifyContent: \"center\",\n          size: 2,\n          gap: 1,\n          children: [/*#__PURE__*/_jsxDEV(Flex, {\n            center: true,\n            pointer: true,\n            className: \"nitro-purse-right-button help p-1\",\n            onClick: event => CreateLinkEvent('help/show'),\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              small: true,\n              children: LocalizeText('help.button.cfh')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            center: true,\n            pointer: true,\n            className: \"nitro-purse-right-button disconnect p-1\",\n            onClick: event => CreateLinkEvent('disconnect'),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"icon icon-purse-disconnect\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            center: true,\n            pointer: true,\n            className: \"nitro-purse-right-button settings p-1\",\n            onClick: event => CreateLinkEvent('user-settings/toggle'),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"icon icon-purse-settings\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), getCurrencyElements(2, -1, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PurseView, \"jbDYqUlVlCQQiMzrf+LZUT7i1tc=\", false, function () {\n  return [usePurse];\n});\n\n_c = PurseView;\n\nvar _c;\n\n$RefreshReg$(_c, \"PurseView\");","map":{"version":3,"sources":["/var/www/game.bobba.ca/src/components/purse/PurseView.tsx"],"names":["FriendlyTime","HabboClubLevelEnum","useCallback","useMemo","CreateLinkEvent","GetConfiguration","LocalizeText","Column","Flex","Grid","LayoutCurrencyIcon","Text","usePurse","CurrencyView","SeasonalView","PurseView","props","purse","hcDisabled","displayedCurrencies","currencyDisplayNumberShort","getClubText","totalDays","clubPeriods","clubDays","minutesUntilExpiration","clubLevel","NO_CLUB","shortFormat","getCurrencyElements","offset","limit","seasonal","activityPoints","size","types","Array","from","keys","filter","type","indexOf","count","shift","elements","push","get","credits","event"],"mappings":"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","sourcesContent":["import { FriendlyTime, HabboClubLevelEnum } from '@nitrots/nitro-renderer';\nimport { FC, useCallback, useMemo } from 'react';\nimport { CreateLinkEvent, GetConfiguration, LocalizeText } from '../../api';\nimport { Column, Flex, Grid, LayoutCurrencyIcon, Text } from '../../common';\nimport { usePurse } from '../../hooks';\nimport { CurrencyView } from './views/CurrencyView';\nimport { SeasonalView } from './views/SeasonalView';\n\nexport const PurseView: FC<{}> = props =>\n{\n    const { purse = null, hcDisabled = false } = usePurse();\n    const displayedCurrencies = useMemo(() => GetConfiguration<number[]>('system.currency.types', []), []);\n    const currencyDisplayNumberShort = useMemo(() => GetConfiguration<boolean>('currency.display.number.short', false), []);\n\n    const getClubText = useMemo(() =>\n    {\n        if(!purse) return null;\n\n        const totalDays = ((purse.clubPeriods * 31) + purse.clubDays);\n        const minutesUntilExpiration = purse.minutesUntilExpiration;\n\n        if(purse.clubLevel === HabboClubLevelEnum.NO_CLUB) return LocalizeText('purse.clubdays.zero.amount.text');\n\n        else if((minutesUntilExpiration > -1) && (minutesUntilExpiration < (60 * 24))) return FriendlyTime.shortFormat(minutesUntilExpiration * 60);\n        \n        else return FriendlyTime.shortFormat(totalDays * 86400);\n    }, [ purse ]);\n\n    const getCurrencyElements = useCallback((offset: number, limit: number = -1, seasonal: boolean = false) =>\n    {\n        if(!purse || !purse.activityPoints || !purse.activityPoints.size) return null;\n\n        const types = Array.from(purse.activityPoints.keys()).filter(type => (displayedCurrencies.indexOf(type) >= 0));\n\n        let count = 0;\n\n        while(count < offset)\n        {\n            types.shift();\n\n            count++;\n        }\n\n        count = 0;\n\n        const elements: JSX.Element[] = [];\n\n        for(const type of types)\n        {\n            if((limit > -1) && (count === limit)) break;\n\n            if(seasonal) elements.push(<SeasonalView key={ type } type={ type } amount={ purse.activityPoints.get(type) } />);\n            else elements.push(<CurrencyView key={ type } type={ type } amount={ purse.activityPoints.get(type) } short={ currencyDisplayNumberShort } />);\n\n            count++;\n        }\n\n        return elements;\n    }, [ purse, displayedCurrencies, currencyDisplayNumberShort ]);\n\n    if(!purse) return null;\n\n    return (\n        <Column className=\"nitro-purse-container\" gap={ 1 }>\n            <Flex className=\"nitro-purse nitro-notification p-2\">\n                <Grid fullWidth gap={ 2 }>\n                    <Column justifyContent=\"center\" size={ hcDisabled ? 8 : 4 } gap={ 1 }>\n                        <CurrencyView type={ -1 } amount={ purse.credits } short={ currencyDisplayNumberShort } />\n                        { getCurrencyElements(0, 2) }\n                    </Column>\n                    { !hcDisabled &&\n                        <Column center pointer size={ 4 } gap={ 1 } className=\"nitro-purse-subscription\" onClick={ event => CreateLinkEvent('habboUI/open/hccenter') }>\n                            <LayoutCurrencyIcon className=\"club-text\" type=\"hc\" />\n                            <Text bold className=\"club-text\">{ getClubText }</Text>\n                        </Column> }\n                    <Column justifyContent=\"center\" size={ 2 } gap={ 1 }>\n                        <Flex center pointer className=\"nitro-purse-right-button help p-1\" onClick={ event => CreateLinkEvent('help/show') }>\n                            <Text small>{ LocalizeText('help.button.cfh') }</Text>\n                        </Flex>\n                        <Flex center pointer className=\"nitro-purse-right-button disconnect p-1\" onClick={ event => CreateLinkEvent('disconnect') }>\n                            <i className=\"icon icon-purse-disconnect\"/>\n                        </Flex>\n                        <Flex center pointer className=\"nitro-purse-right-button settings p-1\" onClick={ event => CreateLinkEvent('user-settings/toggle') } >\n                            <i className=\"icon icon-purse-settings\"/>\n                        </Flex>\n                    </Column>\n                </Grid>\n            </Flex>\n            { getCurrencyElements(2, -1, true) }\n        </Column>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}