{"ast":null,"code":"export default (() => {\n  const intervals = []; // eslint-disable-next-line no-restricted-globals\n\n  self.onmessage = message => {\n    if (!message) return;\n    const data = message.data;\n\n    switch (data.type) {\n      case 'CREATE_INTERVAL':\n        {\n          const id = data.timerId;\n          const time = data.time;\n          const response = data.response;\n          const interval = setInterval(() => postMessage(response), time);\n          intervals.push({\n            id,\n            interval\n          });\n          return;\n        }\n\n      case 'REMOVE_INTERVAL':\n        {\n          const id = data.timerId;\n          const i = 0;\n\n          while (i < intervals.length) {\n            const interval = intervals[i];\n\n            if (interval.id === id) {\n              clearInterval(interval.interval);\n              intervals.splice(i, 1);\n              return;\n            }\n          }\n        }\n    }\n  };\n});","map":{"version":3,"sources":["/var/www/game.bobba.ca/src/workers/IntervalWebWorker.ts"],"names":["intervals","self","onmessage","message","data","type","id","timerId","time","response","interval","setInterval","postMessage","push","i","length","clearInterval","splice"],"mappings":"AAAA,gBAAe,MACf;AACI,QAAMA,SAGH,GAAG,EAHN,CADJ,CAMI;;AACAC,EAAAA,IAAI,CAACC,SAAL,GAAkBC,OAAD,IACjB;AACI,QAAG,CAACA,OAAJ,EAAa;AAEb,UAAMC,IAA8B,GAAGD,OAAO,CAACC,IAA/C;;AAEA,YAAOA,IAAI,CAACC,IAAZ;AAEI,WAAK,iBAAL;AAAwB;AACpB,gBAAMC,EAAE,GAAIF,IAAI,CAACG,OAAjB;AACA,gBAAMC,IAAI,GAAIJ,IAAI,CAACI,IAAnB;AACA,gBAAMC,QAAQ,GAAIL,IAAI,CAACK,QAAvB;AAEA,gBAAMC,QAAQ,GAAGC,WAAW,CAAC,MAAMC,WAAW,CAACH,QAAD,CAAlB,EAA8BD,IAA9B,CAA5B;AAEAR,UAAAA,SAAS,CAACa,IAAV,CAAe;AAAEP,YAAAA,EAAF;AAAMI,YAAAA;AAAN,WAAf;AACA;AACH;;AACD,WAAK,iBAAL;AAAwB;AACpB,gBAAMJ,EAAE,GAAIF,IAAI,CAACG,OAAjB;AAEA,gBAAMO,CAAC,GAAG,CAAV;;AAEA,iBAAMA,CAAC,GAAGd,SAAS,CAACe,MAApB,EACA;AACI,kBAAML,QAAQ,GAAGV,SAAS,CAACc,CAAD,CAA1B;;AAEA,gBAAGJ,QAAQ,CAACJ,EAAT,KAAgBA,EAAnB,EACA;AACIU,cAAAA,aAAa,CAACN,QAAQ,CAACA,QAAV,CAAb;AAEAV,cAAAA,SAAS,CAACiB,MAAV,CAAiBH,CAAjB,EAAoB,CAApB;AAEA;AACH;AACJ;AACJ;AA9BL;AAgCH,GAtCD;AAuCH,CA/CD","sourcesContent":["export default () =>\n{\n    const intervals: {\n        id: number,\n        interval: ReturnType<typeof setInterval>\n    }[] = [];\n\n    // eslint-disable-next-line no-restricted-globals\n    self.onmessage = (message: MessageEvent) =>\n    {\n        if(!message) return;\n\n        const data: { [index: string]: any } = message.data;\n    \n        switch(data.type)\n        {\n            case 'CREATE_INTERVAL': {\n                const id = (data.timerId as number);\n                const time = (data.time as number);\n                const response = (data.response as string);\n    \n                const interval = setInterval(() => postMessage(response), time);\n    \n                intervals.push({ id, interval });\n                return;\n            }\n            case 'REMOVE_INTERVAL': {\n                const id = (data.timerId as number);\n    \n                const i = 0;\n    \n                while(i < intervals.length)\n                {\n                    const interval = intervals[i];\n    \n                    if(interval.id === id)\n                    {\n                        clearInterval(interval.interval);\n    \n                        intervals.splice(i, 1);\n    \n                        return;\n                    }\n                }\n            }\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}