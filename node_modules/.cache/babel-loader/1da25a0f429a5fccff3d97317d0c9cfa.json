{"ast":null,"code":"import { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\nexport class FurnitureValRandomizerVisualization extends FurnitureAnimatedVisualization {\n  constructor() {\n    super();\n    this._stateQueue = void 0;\n    this._running = void 0;\n    this._stateQueue = [];\n    this._running = false;\n    super.setAnimation(FurnitureValRandomizerVisualization.ANIMATION_ID_OFF);\n  }\n\n  setAnimation(animationId) {\n    if (animationId === 0) {\n      if (!this._running) {\n        this._running = true;\n        this._stateQueue = [];\n\n        this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_START_ROLL);\n\n        this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_ROLL);\n\n        return;\n      }\n    }\n\n    if (animationId > 0 && animationId <= FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW2) {\n      if (this._running) {\n        this._running = false;\n        this._stateQueue = [];\n\n        if (this.direction === 2) {\n          this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW1 + 5);\n\n          this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW2 + 5);\n        } else {\n          this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW1 + animationId);\n\n          this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW2 + animationId);\n        }\n\n        this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFF);\n\n        return;\n      }\n\n      super.setAnimation(FurnitureValRandomizerVisualization.ANIMATION_ID_OFF);\n    }\n  }\n\n  updateAnimation(scale) {\n    if (this.getLastFramePlayed(11)) {\n      if (this._stateQueue.length) super.setAnimation(this._stateQueue.shift());\n    }\n\n    return super.updateAnimation(scale);\n  }\n\n}\nFurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW1 = 20;\nFurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW2 = 10;\nFurnitureValRandomizerVisualization.ANIMATION_ID_START_ROLL = 31;\nFurnitureValRandomizerVisualization.ANIMATION_ID_ROLL = 32;\nFurnitureValRandomizerVisualization.ANIMATION_ID_OFF = 30;","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/room/object/visualization/furniture/FurnitureValRandomizerVisualization.ts"],"names":["FurnitureAnimatedVisualization","FurnitureValRandomizerVisualization","constructor","_stateQueue","_running","setAnimation","ANIMATION_ID_OFF","animationId","push","ANIMATION_ID_START_ROLL","ANIMATION_ID_ROLL","ANIMATION_ID_OFFSET_SLOW2","direction","ANIMATION_ID_OFFSET_SLOW1","updateAnimation","scale","getLastFramePlayed","length","shift"],"mappings":"AAAA,SAASA,8BAAT,QAA+C,kCAA/C;AAEA,OAAO,MAAMC,mCAAN,SAAkDD,8BAAlD,CACP;AAUIE,EAAAA,WAAW,GACX;AACI;AADJ,SAJQC,WAIR;AAAA,SAHQC,QAGR;AAGI,SAAKD,WAAL,GAAmB,EAAnB;AACA,SAAKC,QAAL,GAAgB,KAAhB;AAEA,UAAMC,YAAN,CAAmBJ,mCAAmC,CAACK,gBAAvD;AACH;;AAESD,EAAAA,YAAY,CAACE,WAAD,EACtB;AACI,QAAGA,WAAW,KAAK,CAAnB,EACA;AACI,UAAG,CAAC,KAAKH,QAAT,EACA;AACI,aAAKA,QAAL,GAAgB,IAAhB;AACA,aAAKD,WAAL,GAAmB,EAAnB;;AAEA,aAAKA,WAAL,CAAiBK,IAAjB,CAAsBP,mCAAmC,CAACQ,uBAA1D;;AACA,aAAKN,WAAL,CAAiBK,IAAjB,CAAsBP,mCAAmC,CAACS,iBAA1D;;AAEA;AACH;AACJ;;AAED,QAAIH,WAAW,GAAG,CAAf,IAAsBA,WAAW,IAAIN,mCAAmC,CAACU,yBAA5E,EACA;AACI,UAAG,KAAKP,QAAR,EACA;AACI,aAAKA,QAAL,GAAgB,KAAhB;AACA,aAAKD,WAAL,GAAmB,EAAnB;;AAEA,YAAG,KAAKS,SAAL,KAAmB,CAAtB,EACA;AACI,eAAKT,WAAL,CAAiBK,IAAjB,CAAsBP,mCAAmC,CAACY,yBAApC,GAAgE,CAAtF;;AACA,eAAKV,WAAL,CAAiBK,IAAjB,CAAsBP,mCAAmC,CAACU,yBAApC,GAAgE,CAAtF;AACH,SAJD,MAMA;AACI,eAAKR,WAAL,CAAiBK,IAAjB,CAAsBP,mCAAmC,CAACY,yBAApC,GAAgEN,WAAtF;;AACA,eAAKJ,WAAL,CAAiBK,IAAjB,CAAsBP,mCAAmC,CAACU,yBAApC,GAAgEJ,WAAtF;AACH;;AAED,aAAKJ,WAAL,CAAiBK,IAAjB,CAAsBP,mCAAmC,CAACK,gBAA1D;;AAEA;AACH;;AAED,YAAMD,YAAN,CAAmBJ,mCAAmC,CAACK,gBAAvD;AACH;AACJ;;AAESQ,EAAAA,eAAe,CAACC,KAAD,EACzB;AACI,QAAG,KAAKC,kBAAL,CAAwB,EAAxB,CAAH,EACA;AACI,UAAG,KAAKb,WAAL,CAAiBc,MAApB,EAA4B,MAAMZ,YAAN,CAAmB,KAAKF,WAAL,CAAiBe,KAAjB,EAAnB;AAC/B;;AAED,WAAO,MAAMJ,eAAN,CAAsBC,KAAtB,CAAP;AACH;;AAvEL;AADad,mC,CAEMY,yB,GAAoC,E;AAF1CZ,mC,CAGMU,yB,GAAoC,E;AAH1CV,mC,CAIMQ,uB,GAAkC,E;AAJxCR,mC,CAKMS,iB,GAA4B,E;AALlCT,mC,CAMMK,gB,GAA2B,E","sourcesContent":["import { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\r\n\r\nexport class FurnitureValRandomizerVisualization extends FurnitureAnimatedVisualization\r\n{\r\n    private static ANIMATION_ID_OFFSET_SLOW1: number = 20;\r\n    private static ANIMATION_ID_OFFSET_SLOW2: number = 10;\r\n    private static ANIMATION_ID_START_ROLL: number = 31;\r\n    private static ANIMATION_ID_ROLL: number = 32;\r\n    private static ANIMATION_ID_OFF: number = 30;\r\n\r\n    private _stateQueue: number[];\r\n    private _running: boolean;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n\r\n        this._stateQueue = [];\r\n        this._running = false;\r\n\r\n        super.setAnimation(FurnitureValRandomizerVisualization.ANIMATION_ID_OFF);\r\n    }\r\n\r\n    protected setAnimation(animationId: number): void\r\n    {\r\n        if(animationId === 0)\r\n        {\r\n            if(!this._running)\r\n            {\r\n                this._running = true;\r\n                this._stateQueue = [];\r\n\r\n                this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_START_ROLL);\r\n                this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_ROLL);\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n        if((animationId > 0) && (animationId <= FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW2))\r\n        {\r\n            if(this._running)\r\n            {\r\n                this._running = false;\r\n                this._stateQueue = [];\r\n\r\n                if(this.direction === 2)\r\n                {\r\n                    this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW1 + 5);\r\n                    this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW2 + 5);\r\n                }\r\n                else\r\n                {\r\n                    this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW1 + animationId);\r\n                    this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFFSET_SLOW2 + animationId);\r\n                }\r\n\r\n                this._stateQueue.push(FurnitureValRandomizerVisualization.ANIMATION_ID_OFF);\r\n\r\n                return;\r\n            }\r\n\r\n            super.setAnimation(FurnitureValRandomizerVisualization.ANIMATION_ID_OFF);\r\n        }\r\n    }\r\n\r\n    protected updateAnimation(scale: number): number\r\n    {\r\n        if(this.getLastFramePlayed(11))\r\n        {\r\n            if(this._stateQueue.length) super.setAnimation(this._stateQueue.shift());\r\n        }\r\n\r\n        return super.updateAnimation(scale);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}