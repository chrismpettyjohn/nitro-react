{"ast":null,"code":"import { ObjectDataFactory } from '../../../../room/object/data/ObjectDataFactory';\nimport { LegacyDataType } from '../../../../room/object/data/type/LegacyDataType';\nimport { MarketplaceOffer } from '../../incoming/marketplace/MarketplaceOffer';\nexport class MarketplaceOwnOffersParser {\n  constructor() {\n    this._offers = void 0;\n    this._creditsWaiting = void 0;\n  }\n\n  flush() {\n    this._offers = [];\n    return true;\n  }\n\n  parse(wrapper) {\n    if (!wrapper) return false;\n    this._offers = [];\n    this._creditsWaiting = wrapper.readInt(); // SoldPriceTotal\n\n    const offerCount = wrapper.readInt();\n\n    for (let i = 0; i < offerCount; i++) {\n      const offerId = wrapper.readInt();\n      const status = wrapper.readInt();\n      let furniType = wrapper.readInt();\n      let furniId;\n      let extraData;\n      let stuffData;\n\n      if (furniType == 1) {\n        furniId = wrapper.readInt();\n        stuffData = this.getStuffData(wrapper);\n      } else {\n        if (furniType == 2) {\n          furniId = wrapper.readInt();\n          extraData = wrapper.readString();\n        } else if (furniType == 3) {\n          furniId = wrapper.readInt();\n          stuffData = ObjectDataFactory.getData(LegacyDataType.FORMAT_KEY);\n          stuffData.uniqueNumber = wrapper.readInt();\n          stuffData.uniqueSeries = wrapper.readInt();\n          furniType = 1;\n        }\n      }\n\n      const price = wrapper.readInt();\n      const local9 = wrapper.readInt();\n      const local10 = wrapper.readInt();\n      const local13 = new MarketplaceOffer(offerId, furniId, furniType, extraData, stuffData, price, status, local9, local10);\n\n      if (i < MarketplaceOwnOffersParser.MAX_LIST_LENGTH) {\n        this._offers.push(local13);\n      }\n    }\n\n    return true;\n  }\n\n  get offers() {\n    return this._offers;\n  }\n\n  get creditsWaiting() {\n    return this._creditsWaiting;\n  }\n\n  getStuffData(wrapper) {\n    const local2 = wrapper.readInt();\n    const local3 = ObjectDataFactory.getData(local2);\n    local3.parseWrapper(wrapper);\n    return local3;\n  }\n\n}\nMarketplaceOwnOffersParser.MAX_LIST_LENGTH = 500;","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/communication/messages/parser/marketplace/MarketplaceOwnOffersParser.ts"],"names":["ObjectDataFactory","LegacyDataType","MarketplaceOffer","MarketplaceOwnOffersParser","_offers","_creditsWaiting","flush","parse","wrapper","readInt","offerCount","i","offerId","status","furniType","furniId","extraData","stuffData","getStuffData","readString","getData","FORMAT_KEY","uniqueNumber","uniqueSeries","price","local9","local10","local13","MAX_LIST_LENGTH","push","offers","creditsWaiting","local2","local3","parseWrapper"],"mappings":"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","sourcesContent":["import { IMessageDataWrapper, IMessageParser } from '../../../../../core';\r\nimport { IObjectData } from '../../../../room/object/data/IObjectData';\r\nimport { ObjectDataFactory } from '../../../../room/object/data/ObjectDataFactory';\r\nimport { LegacyDataType } from '../../../../room/object/data/type/LegacyDataType';\r\nimport { MarketplaceOffer } from '../../incoming/marketplace/MarketplaceOffer';\r\n\r\nexport class MarketplaceOwnOffersParser implements IMessageParser\r\n{\r\n    private static MAX_LIST_LENGTH = 500;\r\n    private _offers: MarketplaceOffer[];\r\n    private _creditsWaiting: number;\r\n\r\n\r\n    public flush(): boolean\r\n    {\r\n        this._offers = [];\r\n\r\n        return true;\r\n    }\r\n\r\n    public parse(wrapper: IMessageDataWrapper): boolean\r\n    {\r\n        if(!wrapper) return false;\r\n\r\n        this._offers = [];\r\n        this._creditsWaiting = wrapper.readInt(); // SoldPriceTotal\r\n\r\n        const offerCount = wrapper.readInt();\r\n        for(let i = 0; i < offerCount; i++)\r\n        {\r\n            const offerId = wrapper.readInt();\r\n            const status = wrapper.readInt();\r\n            let furniType = wrapper.readInt();\r\n\r\n            let furniId;\r\n            let extraData;\r\n            let stuffData:IObjectData;\r\n            if(furniType == 1)\r\n            {\r\n                furniId = wrapper.readInt();\r\n                stuffData = this.getStuffData(wrapper);\r\n            }\r\n            else\r\n            {\r\n                if(furniType == 2)\r\n                {\r\n                    furniId = wrapper.readInt();\r\n                    extraData = wrapper.readString();\r\n                }\r\n                else if(furniType == 3)\r\n                {\r\n                    furniId = wrapper.readInt();\r\n                    stuffData = ObjectDataFactory.getData(LegacyDataType.FORMAT_KEY);\r\n                    stuffData.uniqueNumber = wrapper.readInt();\r\n                    stuffData.uniqueSeries = wrapper.readInt();\r\n                    furniType = 1;\r\n                }\r\n            }\r\n\r\n            const price = wrapper.readInt();\r\n            const local9 = wrapper.readInt();\r\n            const local10 = wrapper.readInt();\r\n            const local13 = new MarketplaceOffer(offerId, furniId, furniType, extraData, stuffData, price, status, local9, local10);\r\n\r\n            if(i < MarketplaceOwnOffersParser.MAX_LIST_LENGTH)\r\n            {\r\n                this._offers.push(local13);\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    public get offers():MarketplaceOffer[]\r\n    {\r\n        return this._offers;\r\n    }\r\n\r\n    public get creditsWaiting(): number\r\n    {\r\n        return this._creditsWaiting;\r\n    }\r\n\r\n    private getStuffData(wrapper: IMessageDataWrapper): IObjectData\r\n    {\r\n        const local2 = wrapper.readInt();\r\n        const local3 = ObjectDataFactory.getData(local2);\r\n        local3.parseWrapper(wrapper);\r\n        return local3;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}