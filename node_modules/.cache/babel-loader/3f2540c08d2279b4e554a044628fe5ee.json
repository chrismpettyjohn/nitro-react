{"ast":null,"code":"import { FriendCategoryData } from '../../incoming/friendlist/FriendCategoryData';\nimport { FriendParser } from '../../incoming/friendlist/FriendParser';\nexport class FriendListUpdateParser {\n  constructor() {\n    this._categories = void 0;\n    this._removedFriendIds = void 0;\n    this._addedFriends = void 0;\n    this._updatedFriends = void 0;\n  }\n\n  flush() {\n    this._categories = [];\n    this._removedFriendIds = [];\n    this._addedFriends = [];\n    this._updatedFriends = [];\n    return true;\n  }\n\n  parse(wrapper) {\n    if (!wrapper) return false;\n    let totalCategories = wrapper.readInt();\n\n    while (totalCategories > 0) {\n      this._categories.push(new FriendCategoryData(wrapper));\n\n      totalCategories--;\n    }\n\n    let totalUpdates = wrapper.readInt();\n\n    while (totalUpdates > 0) {\n      const type = wrapper.readInt();\n\n      if (type === -1) {\n        this._removedFriendIds.push(wrapper.readInt());\n      } else if (type === 0) {\n        this._updatedFriends.push(new FriendParser(wrapper));\n      } else if (type === 1) {\n        this._addedFriends.push(new FriendParser(wrapper));\n      }\n\n      totalUpdates--;\n    }\n\n    return true;\n  }\n\n  get categories() {\n    return this._categories;\n  }\n\n  get removedFriendIds() {\n    return this._removedFriendIds;\n  }\n\n  get addedFriends() {\n    return this._addedFriends;\n  }\n\n  get updatedFriends() {\n    return this._updatedFriends;\n  }\n\n}","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/communication/messages/parser/friendlist/FriendListUpdateParser.ts"],"names":["FriendCategoryData","FriendParser","FriendListUpdateParser","_categories","_removedFriendIds","_addedFriends","_updatedFriends","flush","parse","wrapper","totalCategories","readInt","push","totalUpdates","type","categories","removedFriendIds","addedFriends","updatedFriends"],"mappings":"AACA,SAASA,kBAAT,QAAmC,8CAAnC;AACA,SAASC,YAAT,QAA6B,wCAA7B;AAEA,OAAO,MAAMC,sBAAN,CACP;AAAA;AAAA,SACYC,WADZ;AAAA,SAEYC,iBAFZ;AAAA,SAGYC,aAHZ;AAAA,SAIYC,eAJZ;AAAA;;AAMWC,EAAAA,KAAK,GACZ;AACI,SAAKJ,WAAL,GAAmB,EAAnB;AACA,SAAKC,iBAAL,GAAyB,EAAzB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,eAAL,GAAuB,EAAvB;AAEA,WAAO,IAAP;AACH;;AAEME,EAAAA,KAAK,CAACC,OAAD,EACZ;AACI,QAAG,CAACA,OAAJ,EAAa,OAAO,KAAP;AAEb,QAAIC,eAAe,GAAGD,OAAO,CAACE,OAAR,EAAtB;;AAEA,WAAMD,eAAe,GAAG,CAAxB,EACA;AACI,WAAKP,WAAL,CAAiBS,IAAjB,CAAsB,IAAIZ,kBAAJ,CAAuBS,OAAvB,CAAtB;;AAEAC,MAAAA,eAAe;AAClB;;AAED,QAAIG,YAAY,GAAGJ,OAAO,CAACE,OAAR,EAAnB;;AAEA,WAAME,YAAY,GAAG,CAArB,EACA;AACI,YAAMC,IAAI,GAAGL,OAAO,CAACE,OAAR,EAAb;;AAEA,UAAGG,IAAI,KAAK,CAAC,CAAb,EACA;AACI,aAAKV,iBAAL,CAAuBQ,IAAvB,CAA4BH,OAAO,CAACE,OAAR,EAA5B;AACH,OAHD,MAKK,IAAGG,IAAI,KAAK,CAAZ,EACL;AACI,aAAKR,eAAL,CAAqBM,IAArB,CAA0B,IAAIX,YAAJ,CAAiBQ,OAAjB,CAA1B;AACH,OAHI,MAKA,IAAGK,IAAI,KAAK,CAAZ,EACL;AACI,aAAKT,aAAL,CAAmBO,IAAnB,CAAwB,IAAIX,YAAJ,CAAiBQ,OAAjB,CAAxB;AACH;;AAEDI,MAAAA,YAAY;AACf;;AAED,WAAO,IAAP;AACH;;AAEoB,MAAVE,UAAU,GACrB;AACI,WAAO,KAAKZ,WAAZ;AACH;;AAE0B,MAAhBa,gBAAgB,GAC3B;AACI,WAAO,KAAKZ,iBAAZ;AACH;;AAEsB,MAAZa,YAAY,GACvB;AACI,WAAO,KAAKZ,aAAZ;AACH;;AAEwB,MAAda,cAAc,GACzB;AACI,WAAO,KAAKZ,eAAZ;AACH;;AA1EL","sourcesContent":["import { IMessageDataWrapper, IMessageParser } from '../../../../../core';\r\nimport { FriendCategoryData } from '../../incoming/friendlist/FriendCategoryData';\r\nimport { FriendParser } from '../../incoming/friendlist/FriendParser';\r\n\r\nexport class FriendListUpdateParser implements IMessageParser\r\n{\r\n    private _categories: FriendCategoryData[];\r\n    private _removedFriendIds: number[];\r\n    private _addedFriends: FriendParser[];\r\n    private _updatedFriends: FriendParser[];\r\n\r\n    public flush(): boolean\r\n    {\r\n        this._categories = [];\r\n        this._removedFriendIds = [];\r\n        this._addedFriends = [];\r\n        this._updatedFriends = [];\r\n\r\n        return true;\r\n    }\r\n\r\n    public parse(wrapper: IMessageDataWrapper): boolean\r\n    {\r\n        if(!wrapper) return false;\r\n\r\n        let totalCategories = wrapper.readInt();\r\n\r\n        while(totalCategories > 0)\r\n        {\r\n            this._categories.push(new FriendCategoryData(wrapper));\r\n\r\n            totalCategories--;\r\n        }\r\n\r\n        let totalUpdates = wrapper.readInt();\r\n\r\n        while(totalUpdates > 0)\r\n        {\r\n            const type = wrapper.readInt();\r\n\r\n            if(type === -1)\r\n            {\r\n                this._removedFriendIds.push(wrapper.readInt());\r\n            }\r\n\r\n            else if(type === 0)\r\n            {\r\n                this._updatedFriends.push(new FriendParser(wrapper));\r\n            }\r\n\r\n            else if(type === 1)\r\n            {\r\n                this._addedFriends.push(new FriendParser(wrapper));\r\n            }\r\n\r\n            totalUpdates--;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    public get categories(): FriendCategoryData[]\r\n    {\r\n        return this._categories;\r\n    }\r\n\r\n    public get removedFriendIds(): number[]\r\n    {\r\n        return this._removedFriendIds;\r\n    }\r\n\r\n    public get addedFriends(): FriendParser[]\r\n    {\r\n        return this._addedFriends;\r\n    }\r\n\r\n    public get updatedFriends(): FriendParser[]\r\n    {\r\n        return this._updatedFriends;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}