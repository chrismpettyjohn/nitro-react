{"ast":null,"code":"var _jsxFileName = \"/var/www/game.bobba.ca/src/components/room/widgets/room-tools/RoomToolsWidgetView.tsx\",\n    _s = $RefreshSig$();\n\nimport { GetGuestRoomResultEvent, RoomLikeRoomComposer } from '@nitrots/nitro-renderer';\nimport classNames from 'classnames';\nimport { useCallback, useEffect, useState } from 'react';\nimport { CreateLinkEvent, GetRoomEngine, LocalizeText, SendMessageComposer } from '../../../../api';\nimport { Base, Column, Flex, Text, TransitionAnimation, TransitionAnimationTypes } from '../../../../common';\nimport { UseMessageEventHook, useSharedNavigatorData } from '../../../../hooks';\nimport { useRoomContext } from '../../RoomContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const RoomToolsWidgetView = props => {\n  _s();\n\n  const [isZoomedIn, setIsZoomedIn] = useState(false);\n  const [roomName, setRoomName] = useState(null);\n  const [roomOwner, setRoomOwner] = useState(null);\n  const [roomTags, setRoomTags] = useState(null);\n  const [roomInfoDisplay, setRoomInfoDisplay] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const [navigatorData, setNavigatorData] = useSharedNavigatorData();\n  const {\n    roomSession = null,\n    widgetHandler = null\n  } = useRoomContext();\n  const [show, setShow] = useState(true);\n\n  const handleToolClick = action => {\n    switch (action) {\n      case 'settings':\n        CreateLinkEvent('navigator/toggle-room-info');\n        return;\n\n      case 'zoom':\n        setIsZoomedIn(prevValue => {\n          let scale = GetRoomEngine().getRoomInstanceRenderingCanvasScale(roomSession.roomId, 1);\n          if (!prevValue) scale /= 2;else scale *= 2;\n          GetRoomEngine().setRoomInstanceRenderingCanvasScale(roomSession.roomId, 1, scale);\n          return !prevValue;\n        });\n        return;\n\n      case 'chat_history':\n        CreateLinkEvent('chat-history/toggle');\n        return;\n\n      case 'like_room':\n        SendMessageComposer(new RoomLikeRoomComposer(1));\n        return;\n\n      case 'toggle_room_link':\n        CreateLinkEvent('navigator/toggle-room-link');\n        return;\n    }\n  };\n\n  const onGetGuestRoomResultEvent = useCallback(event => {\n    const parser = event.getParser();\n    if (!parser.roomEnter) return;\n    if (roomName !== parser.data.roomName) setRoomName(parser.data.roomName);\n    if (roomOwner !== parser.data.ownerName) setRoomOwner(parser.data.ownerName);\n    if (roomTags !== parser.data.tags) setRoomTags(parser.data.tags);\n  }, [roomName, roomOwner, roomTags]);\n  UseMessageEventHook(GetGuestRoomResultEvent, onGetGuestRoomResultEvent);\n  useEffect(() => {\n    setIsOpen(true);\n    const timeout = setTimeout(() => setIsOpen(false), 5000);\n    return () => clearTimeout(timeout);\n  }, [roomName, roomOwner, roomTags]);\n  return /*#__PURE__*/_jsxDEV(Flex, {\n    gap: 2,\n    className: \"nitro-room-tools-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btn-toggle toggle-roomtool d-flex align-items-center\",\n      onClick: () => setShow(!show),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'toggle-icon ' + classNames({\n          'right': !show,\n          'left': show\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), show && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        gap: 0,\n        center: true,\n        className: \"nitro-room-tools p-3 px-3\",\n        children: [/*#__PURE__*/_jsxDEV(Column, {\n          center: true,\n          className: \"p-1\",\n          children: [/*#__PURE__*/_jsxDEV(Base, {\n            pointer: true,\n            title: LocalizeText('room.settings.button.text'),\n            className: \"icon icon-cog\",\n            onClick: () => handleToolClick('settings')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Base, {\n            pointer: true,\n            title: LocalizeText('room.zoom.button.text'),\n            onClick: () => handleToolClick('zoom'),\n            className: 'icon ' + classNames({\n              'icon-zoom-less': !isZoomedIn,\n              'icon-zoom-more': isZoomedIn\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Base, {\n            pointer: true,\n            title: LocalizeText('room.chathistory.button.text'),\n            onClick: () => handleToolClick('chat_history'),\n            className: \"icon icon-chat-history\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), navigatorData.canRate && /*#__PURE__*/_jsxDEV(Base, {\n            pointer: true,\n            title: LocalizeText('room.like.button.text'),\n            onClick: () => handleToolClick('like_room'),\n            className: \"icon icon-like-room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Base, {\n            pointer: true,\n            title: LocalizeText('room.like.button.text'),\n            onClick: () => handleToolClick('toggle_room_link'),\n            className: \"icon icon-link-room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          children: [/*#__PURE__*/_jsxDEV(Flex, {\n            className: \"w-100 room-tool-item\",\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              underline: true,\n              small: true,\n              onClick: () => handleToolClick('settings'),\n              children: LocalizeText('room.settings.button.text')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            className: \"w-100 room-tool-item\",\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              underline: true,\n              small: true,\n              onClick: () => handleToolClick('zoom'),\n              children: LocalizeText('room.zoom.button.text')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            className: \"w-100 room-tool-item\",\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              underline: true,\n              small: true,\n              onClick: () => handleToolClick('chat_history'),\n              children: LocalizeText('room.chathistory.button.text')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), navigatorData.canRate && /*#__PURE__*/_jsxDEV(Flex, {\n            className: \"w-100 room-tool-item\",\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              underline: true,\n              small: true,\n              onClick: () => handleToolClick('like_room'),\n              children: LocalizeText('room.like.button.text')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            className: \"w-100 room-tool-item\",\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              underline: true,\n              small: true,\n              onClick: () => handleToolClick('toggle_room_link'),\n              children: LocalizeText('navigator.embed.caption')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        justifyContent: \"center\",\n        children: /*#__PURE__*/_jsxDEV(TransitionAnimation, {\n          type: TransitionAnimationTypes.SLIDE_LEFT,\n          inProp: isOpen,\n          timeout: 300,\n          children: /*#__PURE__*/_jsxDEV(Column, {\n            center: true,\n            gap: 2,\n            children: /*#__PURE__*/_jsxDEV(Column, {\n              className: \"nitro-room-tools-info py-2 px-3\",\n              children: [/*#__PURE__*/_jsxDEV(Column, {\n                gap: 1,\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  wrap: true,\n                  variant: \"white\",\n                  fontSize: 4,\n                  children: roomName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  variant: \"muted\",\n                  fontSize: 5,\n                  children: roomOwner\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 37\n              }, this), roomTags && roomTags.length > 0 && /*#__PURE__*/_jsxDEV(Flex, {\n                gap: 2,\n                children: roomTags.map((tag, index) => /*#__PURE__*/_jsxDEV(Text, {\n                  small: true,\n                  variant: \"white\",\n                  className: \"rounded bg-primary p-1\",\n                  children: [\"#\", tag]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 75\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n\n_s(RoomToolsWidgetView, \"yCUxYO3xiFNtokTAEK3Q+yBuQ9A=\", false, function () {\n  return [useSharedNavigatorData, useRoomContext];\n});\n\n_c = RoomToolsWidgetView;\n\nvar _c;\n\n$RefreshReg$(_c, \"RoomToolsWidgetView\");","map":{"version":3,"sources":["/var/www/game.bobba.ca/src/components/room/widgets/room-tools/RoomToolsWidgetView.tsx"],"names":["GetGuestRoomResultEvent","RoomLikeRoomComposer","classNames","useCallback","useEffect","useState","CreateLinkEvent","GetRoomEngine","LocalizeText","SendMessageComposer","Base","Column","Flex","Text","TransitionAnimation","TransitionAnimationTypes","UseMessageEventHook","useSharedNavigatorData","useRoomContext","RoomToolsWidgetView","props","isZoomedIn","setIsZoomedIn","roomName","setRoomName","roomOwner","setRoomOwner","roomTags","setRoomTags","roomInfoDisplay","setRoomInfoDisplay","isOpen","setIsOpen","navigatorData","setNavigatorData","roomSession","widgetHandler","show","setShow","handleToolClick","action","prevValue","scale","getRoomInstanceRenderingCanvasScale","roomId","setRoomInstanceRenderingCanvasScale","onGetGuestRoomResultEvent","event","parser","getParser","roomEnter","data","ownerName","tags","timeout","setTimeout","clearTimeout","canRate","SLIDE_LEFT","length","map","tag","index"],"mappings":"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","sourcesContent":["import { GetGuestRoomResultEvent, RoomLikeRoomComposer } from '@nitrots/nitro-renderer';\nimport classNames from 'classnames';\nimport { FC, useCallback, useEffect, useState } from 'react';\nimport { CreateLinkEvent, GetRoomEngine, LocalizeText, SendMessageComposer } from '../../../../api';\nimport { Base, Column, Flex, Text, TransitionAnimation, TransitionAnimationTypes } from '../../../../common';\nimport { UseMessageEventHook, useSharedNavigatorData } from '../../../../hooks';\nimport { useRoomContext } from '../../RoomContext';\n\nexport const RoomToolsWidgetView: FC<{}> = props =>\n{\n    const [ isZoomedIn, setIsZoomedIn ] = useState<boolean>(false);\n    const [ roomName, setRoomName ] = useState<string>(null);\n    const [ roomOwner, setRoomOwner ] = useState<string>(null);\n    const [ roomTags, setRoomTags ] = useState<string[]>(null);\n    const [ roomInfoDisplay, setRoomInfoDisplay ] = useState<boolean>(false);\n    const [ isOpen, setIsOpen ] = useState<boolean>(false);\n    const [ navigatorData, setNavigatorData ] = useSharedNavigatorData();\n    const { roomSession = null, widgetHandler = null } = useRoomContext();\n    const [ show, setShow ] = useState(true);\n\n    const handleToolClick = (action: string) =>\n    {\n        switch(action)\n        {\n            case 'settings':\n                CreateLinkEvent('navigator/toggle-room-info');\n                return;\n            case 'zoom':\n                setIsZoomedIn(prevValue =>\n                {\n                    let scale = GetRoomEngine().getRoomInstanceRenderingCanvasScale(roomSession.roomId, 1);\n                    \n                    if(!prevValue) scale /= 2;\n                    else scale *= 2;\n                    \n                    GetRoomEngine().setRoomInstanceRenderingCanvasScale(roomSession.roomId, 1, scale);\n\n                    return !prevValue;\n                });\n                return;\n            case 'chat_history':\n                CreateLinkEvent('chat-history/toggle');\n                return;\n            case 'like_room':\n                SendMessageComposer(new RoomLikeRoomComposer(1));\n                return;\n            case 'toggle_room_link':\n                CreateLinkEvent('navigator/toggle-room-link');\n                return;\n        }\n    }\n\n    const onGetGuestRoomResultEvent = useCallback((event: GetGuestRoomResultEvent) =>\n    {\n        const parser = event.getParser();\n\n        if(!parser.roomEnter) return;\n\n        if(roomName !== parser.data.roomName) setRoomName(parser.data.roomName);\n        if(roomOwner !== parser.data.ownerName) setRoomOwner(parser.data.ownerName);\n        if(roomTags !== parser.data.tags) setRoomTags(parser.data.tags);\n    }, [ roomName, roomOwner, roomTags ]);\n\n    UseMessageEventHook(GetGuestRoomResultEvent, onGetGuestRoomResultEvent);\n\n    useEffect(() =>\n    {\n        setIsOpen(true);\n\n        const timeout = setTimeout(() => setIsOpen(false), 5000);\n\n        return () => clearTimeout(timeout);\n    }, [ roomName, roomOwner, roomTags ]);\n    \n    return (\n        <Flex gap={ 2 } className=\"nitro-room-tools-container\">\n            <div className=\"btn-toggle toggle-roomtool d-flex align-items-center\" onClick={() => setShow(!show)}>\n                <div className={'toggle-icon ' + classNames({ 'right': !show, 'left': show })} />\n            </div>\n            {show && (\n            <><Flex gap={ 0 } center className=\"nitro-room-tools p-3 px-3\">\n                <Column center className=\"p-1\">\n                    <Base pointer title={ LocalizeText('room.settings.button.text') } className=\"icon icon-cog\" onClick={ () => handleToolClick('settings') } />\n                    <Base pointer title={ LocalizeText('room.zoom.button.text') } onClick={ () => handleToolClick('zoom') } className={ 'icon ' + classNames({ 'icon-zoom-less': !isZoomedIn, 'icon-zoom-more': isZoomedIn }) } />\n                    <Base pointer title={ LocalizeText('room.chathistory.button.text') } onClick={ () => handleToolClick('chat_history') } className=\"icon icon-chat-history\" />\n                    { navigatorData.canRate &&\n                    <Base pointer title={ LocalizeText('room.like.button.text') } onClick={ () => handleToolClick('like_room') } className=\"icon icon-like-room\" /> }\n                    <Base pointer title={ LocalizeText('room.like.button.text') } onClick={ () => handleToolClick('toggle_room_link') } className=\"icon icon-link-room\" />\n                </Column>\n                <Column>\n                    <Flex className=\"w-100 room-tool-item\">\n                    <Text underline small onClick={() => handleToolClick('settings')} >{LocalizeText('room.settings.button.text')}</Text>\n                    </Flex>\n                    <Flex className=\"w-100 room-tool-item\">\n                    <Text underline small onClick={() => handleToolClick('zoom')} >{LocalizeText('room.zoom.button.text')}</Text>\n                    </Flex>\n                    <Flex className=\"w-100 room-tool-item\">\n                    <Text underline small onClick={() => handleToolClick('chat_history')}>{LocalizeText('room.chathistory.button.text')}</Text></Flex>\n                    {navigatorData.canRate &&\n                    <Flex className=\"w-100 room-tool-item\">\n                        <Text underline small onClick={() => handleToolClick('like_room')} >{LocalizeText('room.like.button.text')}</Text>\n                        </Flex>}\n                    <Flex className=\"w-100 room-tool-item\">\n                        <Text underline small onClick={() => handleToolClick('toggle_room_link')}>{LocalizeText('navigator.embed.caption')}</Text>\n                    </Flex>\n                </Column>\n\n                    \n                </Flex>\n                \n                <Column justifyContent=\"center\">\n                        <TransitionAnimation type={TransitionAnimationTypes.SLIDE_LEFT} inProp={isOpen} timeout={300}>\n                            <Column center gap={ 2 }>\n                                <Column className=\"nitro-room-tools-info py-2 px-3\">\n                                    <Column gap={1}>\n                                        <Text wrap variant=\"white\" fontSize={4}>{roomName}</Text>\n                                        <Text variant=\"muted\" fontSize={5}>{roomOwner}</Text>\n                                    </Column>\n                                    {roomTags && roomTags.length > 0 &&\n                                        <Flex gap={2}>\n                                            {roomTags.map((tag, index) => <Text key={index} small variant=\"white\" className=\"rounded bg-primary p-1\">#{tag}</Text>)}\n                                        </Flex>}\n                                </Column>\n                            </Column>\n                        </TransitionAnimation>\n                    </Column></>\n            )}\n        </Flex>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}