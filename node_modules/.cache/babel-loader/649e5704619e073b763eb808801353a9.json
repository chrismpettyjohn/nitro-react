{"ast":null,"code":"var _jsxFileName = \"/var/www/game.bobba.ca/src/components/help/HelpView.tsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { AddEventLinkTracker, LocalizeText, RemoveLinkEventTracker } from '../../api';\nimport { Base, Column, Grid, NitroCardContentView, NitroCardHeaderView, NitroCardView } from '../../common';\nimport { HelpReportUserEvent } from '../../events/help/HelpReportUserEvent';\nimport { UseUiEvent } from '../../hooks';\nimport { HelpContextProvider } from './HelpContext';\nimport { HelpMessageHandler } from './HelpMessageHandler';\nimport { DescribeReportView } from './views/DescribeReportView';\nimport { HelpIndexView } from './views/HelpIndexView';\nimport { NameChangeView } from './views/name-change/NameChangeView';\nimport { SanctionSatusView } from './views/SanctionStatusView';\nimport { SelectReportedChatsView } from './views/SelectReportedChatsView';\nimport { SelectReportedUserView } from './views/SelectReportedUserView';\nimport { SelectTopicView } from './views/SelectTopicView';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const HelpView = props => {\n  _s();\n\n  const [isVisible, setIsVisible] = useState(false);\n  const [helpReportState, setHelpReportState] = useState({\n    reportedUserId: -1,\n    reportedChats: [],\n    cfhCategory: -1,\n    cfhTopic: -1,\n    roomId: -1,\n    message: '',\n    currentStep: 0\n  });\n  const linkReceived = useCallback(url => {\n    const parts = url.split('/');\n    if (parts.length < 2) return;\n\n    switch (parts[1]) {\n      case 'show':\n        setIsVisible(true);\n        return;\n\n      case 'hide':\n        setIsVisible(false);\n        return;\n\n      case 'toggle':\n        setIsVisible(prevValue => !prevValue);\n        return;\n    }\n  }, []);\n  const onHelpReportUserEvent = useCallback(event => {\n    setHelpReportState({\n      reportedUserId: event.reportedUserId,\n      reportedChats: [],\n      cfhCategory: -1,\n      cfhTopic: -1,\n      roomId: -1,\n      message: '',\n      currentStep: 2\n    });\n    setIsVisible(true);\n  }, []);\n  UseUiEvent(HelpReportUserEvent.REPORT_USER, onHelpReportUserEvent);\n  useEffect(() => {\n    const linkTracker = {\n      linkReceived,\n      eventUrlPrefix: 'help/'\n    };\n    AddEventLinkTracker(linkTracker);\n    return () => RemoveLinkEventTracker(linkTracker);\n  }, [linkReceived]);\n  useEffect(() => {\n    if (!isVisible) return;\n    setHelpReportState({\n      reportedUserId: -1,\n      reportedChats: [],\n      cfhCategory: -1,\n      cfhTopic: -1,\n      roomId: -1,\n      message: '',\n      currentStep: 0\n    });\n  }, [isVisible]);\n  const CurrentStepView = useCallback(() => {\n    switch (helpReportState.currentStep) {\n      case 0:\n        return /*#__PURE__*/_jsxDEV(HelpIndexView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 28\n        }, this);\n\n      case 1:\n        return /*#__PURE__*/_jsxDEV(SelectReportedUserView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 28\n        }, this);\n\n      case 2:\n        return /*#__PURE__*/_jsxDEV(SelectReportedChatsView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 28\n        }, this);\n\n      case 3:\n        return /*#__PURE__*/_jsxDEV(SelectTopicView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 28\n        }, this);\n\n      case 4:\n        return /*#__PURE__*/_jsxDEV(DescribeReportView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 28\n        }, this);\n    }\n\n    return null;\n  }, [helpReportState.currentStep]);\n  return /*#__PURE__*/_jsxDEV(HelpContextProvider, {\n    value: {\n      helpReportState,\n      setHelpReportState\n    },\n    children: [/*#__PURE__*/_jsxDEV(HelpMessageHandler, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), isVisible && /*#__PURE__*/_jsxDEV(NitroCardView, {\n      className: \"nitro-help\",\n      theme: \"primary\",\n      children: [/*#__PURE__*/_jsxDEV(NitroCardHeaderView, {\n        headerText: LocalizeText('help.button.cfh'),\n        onCloseClick: event => setIsVisible(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(NitroCardContentView, {\n        className: \"text-black\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          children: [/*#__PURE__*/_jsxDEV(Column, {\n            center: true,\n            size: 5,\n            overflow: \"hidden\",\n            children: /*#__PURE__*/_jsxDEV(Base, {\n              className: \"index-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            justifyContent: \"between\",\n            size: 7,\n            overflow: \"hidden\",\n            children: /*#__PURE__*/_jsxDEV(CurrentStepView, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(SanctionSatusView, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NameChangeView, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 9\n  }, this);\n};\n\n_s(HelpView, \"w7TitjHshO59m25GwACMx6T6Pwg=\");\n\n_c = HelpView;\n\nvar _c;\n\n$RefreshReg$(_c, \"HelpView\");","map":{"version":3,"sources":["/var/www/game.bobba.ca/src/components/help/HelpView.tsx"],"names":["useCallback","useEffect","useState","AddEventLinkTracker","LocalizeText","RemoveLinkEventTracker","Base","Column","Grid","NitroCardContentView","NitroCardHeaderView","NitroCardView","HelpReportUserEvent","UseUiEvent","HelpContextProvider","HelpMessageHandler","DescribeReportView","HelpIndexView","NameChangeView","SanctionSatusView","SelectReportedChatsView","SelectReportedUserView","SelectTopicView","HelpView","props","isVisible","setIsVisible","helpReportState","setHelpReportState","reportedUserId","reportedChats","cfhCategory","cfhTopic","roomId","message","currentStep","linkReceived","url","parts","split","length","prevValue","onHelpReportUserEvent","event","REPORT_USER","linkTracker","eventUrlPrefix","CurrentStepView"],"mappings":"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","sourcesContent":["import { ILinkEventTracker } from '@nitrots/nitro-renderer';\nimport { FC, useCallback, useEffect, useState } from 'react';\nimport { AddEventLinkTracker, LocalizeText, RemoveLinkEventTracker } from '../../api';\nimport { Base, Column, Grid, NitroCardContentView, NitroCardHeaderView, NitroCardView } from '../../common';\nimport { HelpReportUserEvent } from '../../events/help/HelpReportUserEvent';\nimport { UseUiEvent } from '../../hooks';\nimport { IHelpReportState } from './common/IHelpReportState';\nimport { HelpContextProvider } from './HelpContext';\nimport { HelpMessageHandler } from './HelpMessageHandler';\nimport { DescribeReportView } from './views/DescribeReportView';\nimport { HelpIndexView } from './views/HelpIndexView';\nimport { NameChangeView } from './views/name-change/NameChangeView';\nimport { SanctionSatusView } from './views/SanctionStatusView';\nimport { SelectReportedChatsView } from './views/SelectReportedChatsView';\nimport { SelectReportedUserView } from './views/SelectReportedUserView';\nimport { SelectTopicView } from './views/SelectTopicView';\n\nexport const HelpView: FC<{}> = props =>\n{\n    const [ isVisible, setIsVisible ] = useState(false);\n    const [ helpReportState, setHelpReportState ] = useState<IHelpReportState>({\n        reportedUserId: -1,\n        reportedChats: [],\n        cfhCategory: -1,\n        cfhTopic: -1,\n        roomId: -1,\n        message: '',\n        currentStep: 0\n    });\n\n    const linkReceived = useCallback((url: string) =>\n    {\n        const parts = url.split('/');\n\n        if(parts.length < 2) return;\n\n        switch(parts[1])\n        {\n            case 'show':\n                setIsVisible(true);\n                return;\n            case 'hide':\n                setIsVisible(false);\n                return;\n            case 'toggle':\n                setIsVisible(prevValue => !prevValue);\n                return;\n        }\n    }, []);\n\n    const onHelpReportUserEvent = useCallback((event: HelpReportUserEvent) =>\n    {\n        setHelpReportState({\n            reportedUserId: event.reportedUserId,\n            reportedChats: [],\n            cfhCategory: -1,\n            cfhTopic: -1,\n            roomId: -1,\n            message: '',\n            currentStep: 2\n        });\n        \n        setIsVisible(true);\n    }, []);\n\n    UseUiEvent(HelpReportUserEvent.REPORT_USER, onHelpReportUserEvent);\n\n    useEffect(() =>\n    {\n        const linkTracker: ILinkEventTracker = {\n            linkReceived,\n            eventUrlPrefix: 'help/'\n        };\n\n        AddEventLinkTracker(linkTracker);\n\n        return () => RemoveLinkEventTracker(linkTracker);\n    }, [ linkReceived ]);\n\n    useEffect(() =>\n    {\n        if(!isVisible) return;\n\n        setHelpReportState({\n            reportedUserId: -1,\n            reportedChats: [],\n            cfhCategory: -1,\n            cfhTopic: -1,\n            roomId: -1,\n            message: '',\n            currentStep: 0\n        });\n    }, [ isVisible ]);\n\n    const CurrentStepView = useCallback(() =>\n    {\n        switch(helpReportState.currentStep)\n        {\n            case 0: return <HelpIndexView />\n            case 1: return <SelectReportedUserView />\n            case 2: return <SelectReportedChatsView />\n            case 3: return <SelectTopicView />\n            case 4: return <DescribeReportView />\n        }\n\n        return null;\n    }, [ helpReportState.currentStep ]);\n\n    return (\n        <HelpContextProvider value={ { helpReportState, setHelpReportState } }>\n            <HelpMessageHandler />\n            { isVisible &&\n                <NitroCardView className=\"nitro-help\" theme=\"primary\">\n                    <NitroCardHeaderView headerText={ LocalizeText('help.button.cfh') } onCloseClick={ event => setIsVisible(false) } />\n                    <NitroCardContentView className=\"text-black\">\n                        <Grid>\n                            <Column center size={ 5 } overflow=\"hidden\">\n                                <Base className=\"index-image\" />\n                            </Column>\n                            <Column justifyContent=\"between\" size={ 7 } overflow=\"hidden\">\n                                <CurrentStepView />\n                            </Column>\n                        </Grid>\n                    </NitroCardContentView>\n                </NitroCardView> }\n            <SanctionSatusView />\n            <NameChangeView />\n        </HelpContextProvider>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}