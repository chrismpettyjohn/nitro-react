{"ast":null,"code":"import { RoomObjectVariable } from '../../RoomObjectVariable';\nimport { ObjectDataBase } from '../ObjectDataBase';\nimport { ObjectDataKey } from '../ObjectDataKey';\nexport class StringDataType extends ObjectDataBase {\n  constructor() {\n    super();\n    this._data = void 0;\n    this._data = [];\n  }\n\n  parseWrapper(wrapper) {\n    if (!wrapper) return;\n    this._data = [];\n    const totalStrings = wrapper.readInt();\n    if (totalStrings) for (let i = 0; i < totalStrings; i++) this._data.push(wrapper.readString());\n    super.parseWrapper(wrapper);\n  }\n\n  initializeFromRoomObjectModel(model) {\n    super.initializeFromRoomObjectModel(model);\n    this._data = model.getValue(RoomObjectVariable.FURNITURE_DATA);\n  }\n\n  writeRoomObjectModel(model) {\n    super.writeRoomObjectModel(model);\n    model.setValue(RoomObjectVariable.FURNITURE_DATA_FORMAT, StringDataType.FORMAT_KEY);\n    model.setValue(RoomObjectVariable.FURNITURE_DATA, this._data);\n  }\n\n  getLegacyString() {\n    if (!this._data || !this._data.length) return '';\n    return this._data[StringDataType.STATE];\n  }\n\n  compare(data) {\n    if (!(data instanceof StringDataType)) return false;\n    let i = 0;\n\n    while (i < this._data.length) {\n      if (i === 0) {//\n      } else {\n        if (this._data[i] !== data.getValue(i)) return false;\n      }\n\n      i++;\n    }\n\n    return true;\n  }\n\n  getValue(index) {\n    return this._data[index] || '';\n  }\n\n  setValue(data) {\n    this._data = data;\n  }\n\n}\nStringDataType.FORMAT_KEY = ObjectDataKey.STRING_KEY;\nStringDataType.STATE = 0;","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/room/object/data/type/StringDataType.ts"],"names":["RoomObjectVariable","ObjectDataBase","ObjectDataKey","StringDataType","constructor","_data","parseWrapper","wrapper","totalStrings","readInt","i","push","readString","initializeFromRoomObjectModel","model","getValue","FURNITURE_DATA","writeRoomObjectModel","setValue","FURNITURE_DATA_FORMAT","FORMAT_KEY","getLegacyString","length","STATE","compare","data","index","STRING_KEY"],"mappings":"AAEA,SAASA,kBAAT,QAAmC,0BAAnC;AAEA,SAASC,cAAT,QAA+B,mBAA/B;AACA,SAASC,aAAT,QAA8B,kBAA9B;AAEA,OAAO,MAAMC,cAAN,SAA6BF,cAA7B,CACP;AAOIG,EAAAA,WAAW,GACX;AACI;AADJ,SAHQC,KAGR;AAGI,SAAKA,KAAL,GAAa,EAAb;AACH;;AAEMC,EAAAA,YAAY,CAACC,OAAD,EACnB;AACI,QAAG,CAACA,OAAJ,EAAa;AAEb,SAAKF,KAAL,GAAa,EAAb;AAEA,UAAMG,YAAY,GAAGD,OAAO,CAACE,OAAR,EAArB;AAEA,QAAGD,YAAH,EAAiB,KAAI,IAAIE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGF,YAAnB,EAAiCE,CAAC,EAAlC,EAAsC,KAAKL,KAAL,CAAWM,IAAX,CAAgBJ,OAAO,CAACK,UAAR,EAAhB;AAEvD,UAAMN,YAAN,CAAmBC,OAAnB;AACH;;AAEMM,EAAAA,6BAA6B,CAACC,KAAD,EACpC;AACI,UAAMD,6BAAN,CAAoCC,KAApC;AAEA,SAAKT,KAAL,GAAaS,KAAK,CAACC,QAAN,CAAyBf,kBAAkB,CAACgB,cAA5C,CAAb;AACH;;AAEMC,EAAAA,oBAAoB,CAACH,KAAD,EAC3B;AACI,UAAMG,oBAAN,CAA2BH,KAA3B;AAEAA,IAAAA,KAAK,CAACI,QAAN,CAAelB,kBAAkB,CAACmB,qBAAlC,EAAyDhB,cAAc,CAACiB,UAAxE;AACAN,IAAAA,KAAK,CAACI,QAAN,CAAelB,kBAAkB,CAACgB,cAAlC,EAAkD,KAAKX,KAAvD;AACH;;AAEMgB,EAAAA,eAAe,GACtB;AACI,QAAG,CAAC,KAAKhB,KAAN,IAAe,CAAC,KAAKA,KAAL,CAAWiB,MAA9B,EAAsC,OAAO,EAAP;AAEtC,WAAO,KAAKjB,KAAL,CAAWF,cAAc,CAACoB,KAA1B,CAAP;AACH;;AAEMC,EAAAA,OAAO,CAACC,IAAD,EACd;AACI,QAAG,EAAEA,IAAI,YAAYtB,cAAlB,CAAH,EAAsC,OAAO,KAAP;AAEtC,QAAIO,CAAC,GAAG,CAAR;;AAEA,WAAMA,CAAC,GAAG,KAAKL,KAAL,CAAWiB,MAArB,EACA;AACI,UAAGZ,CAAC,KAAK,CAAT,EACA,CACI;AACH,OAHD,MAKA;AACI,YAAG,KAAKL,KAAL,CAAWK,CAAX,MAAkBe,IAAI,CAACV,QAAL,CAAcL,CAAd,CAArB,EAAuC,OAAO,KAAP;AAC1C;;AAEDA,MAAAA,CAAC;AACJ;;AAED,WAAO,IAAP;AACH;;AAEMK,EAAAA,QAAQ,CAACW,KAAD,EACf;AACI,WAAO,KAAKrB,KAAL,CAAWqB,KAAX,KAAqB,EAA5B;AACH;;AAEMR,EAAAA,QAAQ,CAACO,IAAD,EACf;AACI,SAAKpB,KAAL,GAAaoB,IAAb;AACH;;AAhFL;AADatB,c,CAEKiB,U,GAAalB,aAAa,CAACyB,U;AAFhCxB,c,CAIMoB,K,GAAgB,C","sourcesContent":["import { IMessageDataWrapper } from '../../../../../core/communication/messages/IMessageDataWrapper';\r\nimport { IRoomObjectModel } from '../../../../../room/object/IRoomObjectModel';\r\nimport { RoomObjectVariable } from '../../RoomObjectVariable';\r\nimport { IObjectData } from '../IObjectData';\r\nimport { ObjectDataBase } from '../ObjectDataBase';\r\nimport { ObjectDataKey } from '../ObjectDataKey';\r\n\r\nexport class StringDataType extends ObjectDataBase\r\n{\r\n    public static FORMAT_KEY = ObjectDataKey.STRING_KEY;\r\n\r\n    private static STATE: number = 0;\r\n\r\n    private _data: string[];\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n\r\n        this._data = [];\r\n    }\r\n\r\n    public parseWrapper(wrapper: IMessageDataWrapper): void\r\n    {\r\n        if(!wrapper) return;\r\n\r\n        this._data = [];\r\n\r\n        const totalStrings = wrapper.readInt();\r\n\r\n        if(totalStrings) for(let i = 0; i < totalStrings; i++) this._data.push(wrapper.readString());\r\n\r\n        super.parseWrapper(wrapper);\r\n    }\r\n\r\n    public initializeFromRoomObjectModel(model: IRoomObjectModel): void\r\n    {\r\n        super.initializeFromRoomObjectModel(model);\r\n\r\n        this._data = model.getValue<string[]>(RoomObjectVariable.FURNITURE_DATA);\r\n    }\r\n\r\n    public writeRoomObjectModel(model: IRoomObjectModel): void\r\n    {\r\n        super.writeRoomObjectModel(model);\r\n\r\n        model.setValue(RoomObjectVariable.FURNITURE_DATA_FORMAT, StringDataType.FORMAT_KEY);\r\n        model.setValue(RoomObjectVariable.FURNITURE_DATA, this._data);\r\n    }\r\n\r\n    public getLegacyString(): string\r\n    {\r\n        if(!this._data || !this._data.length) return '';\r\n\r\n        return this._data[StringDataType.STATE];\r\n    }\r\n\r\n    public compare(data: IObjectData): boolean\r\n    {\r\n        if(!(data instanceof StringDataType)) return false;\r\n\r\n        let i = 0;\r\n\r\n        while(i < this._data.length)\r\n        {\r\n            if(i === 0)\r\n            {\r\n                //\r\n            }\r\n            else\r\n            {\r\n                if(this._data[i] !== data.getValue(i)) return false;\r\n            }\r\n\r\n            i++;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    public getValue(index: number): string\r\n    {\r\n        return this._data[index] || '';\r\n    }\r\n\r\n    public setValue(data: string[]): void\r\n    {\r\n        this._data = data;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}