{"ast":null,"code":"var _jsxFileName = \"/var/www/game.bobba.ca/src/components/navigator/views/room-settings/NavigatorRoomSettingsBasicTabView.tsx\",\n    _s = $RefreshSig$();\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { RoomDeleteComposer } from '@nitrots/nitro-renderer';\nimport { useEffect, useState } from 'react';\nimport { CreateLinkEvent, GetMaxVisitorsList, LocalizeText, NotificationUtilities, SendMessageComposer } from '../../../../api';\nimport { Base, Column, Flex, Text } from '../../../../common';\nimport { useNavigatorContext } from '../../NavigatorContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ROOM_NAME_MIN_LENGTH = 3;\nconst ROOM_NAME_MAX_LENGTH = 60;\nconst DESC_MAX_LENGTH = 255;\nexport const NavigatorRoomSettingsBasicTabView = props => {\n  _s();\n\n  const {\n    roomData = null,\n    handleChange = null,\n    close = null\n  } = props;\n  const [roomName, setRoomName] = useState('');\n  const [roomDescription, setRoomDescription] = useState('');\n  const {\n    categories = null\n  } = useNavigatorContext();\n\n  const deleteRoom = () => {\n    NotificationUtilities.confirm(LocalizeText('navigator.roomsettings.deleteroom.confirm.message', ['room_name'], [roomData.roomName]), () => {\n      SendMessageComposer(new RoomDeleteComposer(roomData.roomId));\n      if (close) close();\n      CreateLinkEvent('navigator/search/myworld_view');\n    }, null, null, null, LocalizeText('navigator.roomsettings.deleteroom.confirm.title'));\n  };\n\n  const saveRoomName = () => {\n    if (roomName === roomData.roomName || roomName.length < ROOM_NAME_MIN_LENGTH || roomName.length > ROOM_NAME_MAX_LENGTH) return;\n    handleChange('name', roomName);\n  };\n\n  const saveRoomDescription = () => {\n    if (roomDescription === roomData.roomDescription || roomDescription.length > DESC_MAX_LENGTH) return;\n    handleChange('description', roomDescription);\n  };\n\n  useEffect(() => {\n    setRoomName(roomData.roomName);\n    setRoomDescription(roomData.roomDescription);\n  }, [roomData]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      gap: 1,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        className: \"col-3\",\n        children: LocalizeText('navigator.roomname')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        fullWidth: true,\n        gap: 0,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control form-control-sm\",\n          value: roomName,\n          maxLength: ROOM_NAME_MAX_LENGTH,\n          onChange: event => setRoomName(event.target.value),\n          onBlur: saveRoomName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), roomName.length < ROOM_NAME_MIN_LENGTH && /*#__PURE__*/_jsxDEV(Text, {\n          bold: true,\n          small: true,\n          variant: \"danger\",\n          children: LocalizeText('navigator.roomsettings.roomnameismandatory')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      gap: 1,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        className: \"col-3\",\n        children: LocalizeText('navigator.roomsettings.desc')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        value: roomDescription,\n        maxLength: DESC_MAX_LENGTH,\n        onChange: event => setRoomDescription(event.target.value),\n        onBlur: saveRoomDescription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      gap: 1,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        className: \"col-3\",\n        children: LocalizeText('navigator.category')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-select form-select-sm\",\n        value: roomData.categoryId,\n        onChange: event => handleChange('category', event.target.value),\n        children: categories && categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: category.id,\n          children: LocalizeText(category.name)\n        }, category.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 64\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      gap: 1,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        className: \"col-3\",\n        children: LocalizeText('navigator.maxvisitors')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-select form-select-sm\",\n        value: roomData.userCount,\n        onChange: event => handleChange('max_visitors', event.target.value),\n        children: GetMaxVisitorsList && GetMaxVisitorsList.map(value => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: value,\n          children: value\n        }, value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 77\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      gap: 1,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        className: \"col-3\",\n        children: LocalizeText('navigator.tradesettings')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-select form-select-sm\",\n        value: roomData.tradeState,\n        onChange: event => handleChange('trade_state', event.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"0\",\n          children: LocalizeText('navigator.roomsettings.trade_not_allowed')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1\",\n          children: LocalizeText('navigator.roomsettings.trade_not_with_Controller')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"2\",\n          children: LocalizeText('navigator.roomsettings.trade_allowed')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Flex, {\n      alignItems: \"center\",\n      gap: 1,\n      children: [/*#__PURE__*/_jsxDEV(Base, {\n        className: \"col-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        checked: roomData.allowWalkthrough,\n        onChange: event => handleChange('allow_walkthrough', event.target.checked)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        children: LocalizeText('navigator.roomsettings.allow_walk_through')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Text, {\n      variant: \"danger\",\n      underline: true,\n      bold: true,\n      pointer: true,\n      className: \"d-flex justify-content-center align-items-center gap-1\",\n      onClick: deleteRoom,\n      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: \"times\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), LocalizeText('navigator.roomsettings.delete')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(NavigatorRoomSettingsBasicTabView, \"1zy9YwrwfGo2jvncEZjyfPOE9qU=\", false, function () {\n  return [useNavigatorContext];\n});\n\n_c = NavigatorRoomSettingsBasicTabView;\n\nvar _c;\n\n$RefreshReg$(_c, \"NavigatorRoomSettingsBasicTabView\");","map":{"version":3,"sources":["/var/www/game.bobba.ca/src/components/navigator/views/room-settings/NavigatorRoomSettingsBasicTabView.tsx"],"names":["FontAwesomeIcon","RoomDeleteComposer","useEffect","useState","CreateLinkEvent","GetMaxVisitorsList","LocalizeText","NotificationUtilities","SendMessageComposer","Base","Column","Flex","Text","useNavigatorContext","ROOM_NAME_MIN_LENGTH","ROOM_NAME_MAX_LENGTH","DESC_MAX_LENGTH","NavigatorRoomSettingsBasicTabView","props","roomData","handleChange","close","roomName","setRoomName","roomDescription","setRoomDescription","categories","deleteRoom","confirm","roomId","saveRoomName","length","saveRoomDescription","event","target","value","categoryId","map","category","id","name","userCount","tradeState","allowWalkthrough","checked"],"mappings":"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","sourcesContent":["import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { RoomDeleteComposer } from '@nitrots/nitro-renderer';\nimport { FC, useEffect, useState } from 'react';\nimport { CreateLinkEvent, GetMaxVisitorsList, IRoomData, LocalizeText, NotificationUtilities, SendMessageComposer } from '../../../../api';\nimport { Base, Column, Flex, Text } from '../../../../common';\nimport { useNavigatorContext } from '../../NavigatorContext';\n\nconst ROOM_NAME_MIN_LENGTH = 3;\nconst ROOM_NAME_MAX_LENGTH = 60;\nconst DESC_MAX_LENGTH = 255;\n\ninterface NavigatorRoomSettingsTabViewProps\n{\n    roomData: IRoomData;\n    handleChange: (field: string, value: string | number | boolean) => void;\n    close: () => void;\n}\n\n\nexport const NavigatorRoomSettingsBasicTabView: FC<NavigatorRoomSettingsTabViewProps> = props =>\n{\n    const { roomData = null, handleChange = null, close = null } = props;\n    const [ roomName, setRoomName ] = useState<string>('');\n    const [ roomDescription, setRoomDescription ] = useState<string>('');\n    const { categories = null } = useNavigatorContext();\n\n    const deleteRoom = () =>\n    {\n        NotificationUtilities.confirm(LocalizeText('navigator.roomsettings.deleteroom.confirm.message', [ 'room_name' ], [ roomData.roomName ] ), () =>\n        {\n            SendMessageComposer(new RoomDeleteComposer(roomData.roomId));\n\n            if(close) close();\n\n            CreateLinkEvent('navigator/search/myworld_view');\n        },\n        null, null, null, LocalizeText('navigator.roomsettings.deleteroom.confirm.title'));\n    }\n\n    const saveRoomName = () =>\n    {\n        if((roomName === roomData.roomName) || (roomName.length < ROOM_NAME_MIN_LENGTH) || (roomName.length > ROOM_NAME_MAX_LENGTH)) return;\n\n        handleChange('name', roomName);\n    }\n\n    const saveRoomDescription = () =>\n    {\n        if((roomDescription === roomData.roomDescription) || (roomDescription.length > DESC_MAX_LENGTH)) return;\n\n        handleChange('description', roomDescription);\n    } \n\n    useEffect(() =>\n    {\n        setRoomName(roomData.roomName);\n        setRoomDescription(roomData.roomDescription);\n    }, [ roomData ]);\n\n    return (\n        <>\n            <Flex alignItems=\"center\" gap={ 1 }>\n                <Text className=\"col-3\">{ LocalizeText('navigator.roomname') }</Text>\n                <Column fullWidth gap={ 0 }>\n                    <input className=\"form-control form-control-sm\" value={ roomName } maxLength={ ROOM_NAME_MAX_LENGTH } onChange={ event => setRoomName(event.target.value) } onBlur={ saveRoomName } />\n                    { (roomName.length < ROOM_NAME_MIN_LENGTH) &&\n                        <Text bold small variant=\"danger\">\n                            { LocalizeText('navigator.roomsettings.roomnameismandatory') }\n                        </Text> }\n                </Column>\n            </Flex>\n            <Flex alignItems=\"center\" gap={ 1 }>\n                <Text className=\"col-3\">{ LocalizeText('navigator.roomsettings.desc') }</Text>\n                <textarea className=\"form-control form-control-sm\" value={ roomDescription } maxLength={ DESC_MAX_LENGTH } onChange={ event => setRoomDescription(event.target.value) } onBlur={ saveRoomDescription } />\n            </Flex>\n            <Flex alignItems=\"center\" gap={ 1 }>\n                <Text className=\"col-3\">{ LocalizeText('navigator.category') }</Text>\n                <select className=\"form-select form-select-sm\" value={ roomData.categoryId } onChange={ event => handleChange('category', event.target.value) }>\n                    { categories && categories.map(category => <option key={ category.id } value={ category.id }>{ LocalizeText(category.name) }</option>) }\n                </select>\n            </Flex>\n            <Flex alignItems=\"center\" gap={ 1 }>\n                <Text className=\"col-3\">{ LocalizeText('navigator.maxvisitors') }</Text>\n                <select className=\"form-select form-select-sm\" value={ roomData.userCount } onChange={ event => handleChange('max_visitors', event.target.value) }>\n                    { GetMaxVisitorsList && GetMaxVisitorsList.map(value => <option key={ value } value={ value }>{ value }</option>) }\n                </select>\n            </Flex>\n            <Flex alignItems=\"center\" gap={ 1 }>\n                <Text className=\"col-3\">{ LocalizeText('navigator.tradesettings') }</Text>\n                <select className=\"form-select form-select-sm\" value={ roomData.tradeState } onChange={ event => handleChange('trade_state', event.target.value) }>\n                    <option value=\"0\">{ LocalizeText('navigator.roomsettings.trade_not_allowed') }</option>\n                    <option value=\"1\">{ LocalizeText('navigator.roomsettings.trade_not_with_Controller') }</option>\n                    <option value=\"2\">{ LocalizeText('navigator.roomsettings.trade_allowed') }</option>\n                </select>\n            </Flex>\n            <Flex alignItems=\"center\" gap={ 1 }>\n                <Base className=\"col-3\" />\n                <input className=\"form-check-input\" type=\"checkbox\" checked={ roomData.allowWalkthrough } onChange={ event => handleChange('allow_walkthrough', event.target.checked) } />\n                <Text>{ LocalizeText('navigator.roomsettings.allow_walk_through') }</Text>\n            </Flex>\n            <Text variant=\"danger\" underline bold pointer className=\"d-flex justify-content-center align-items-center gap-1\" onClick={ deleteRoom }>\n                <FontAwesomeIcon icon=\"times\" />\n                { LocalizeText('navigator.roomsettings.delete') }\n            </Text>\n        </>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}