{"ast":null,"code":"import { RoomObjectVariable } from '../../RoomObjectVariable';\nimport { FurnitureDynamicThumbnailVisualization } from './FurnitureDynamicThumbnailVisualization';\nexport class FurnitureExternalImageVisualization extends FurnitureDynamicThumbnailVisualization {\n  constructor() {\n    super();\n    this._url = void 0;\n    this._typePrefix = void 0;\n    this._url = null;\n    this._typePrefix = null;\n  }\n\n  getThumbnailURL() {\n    if (!this.object) return null;\n    if (this._url) return this._url;\n    const jsonString = this.object.model.getValue(RoomObjectVariable.FURNITURE_DATA);\n    if (!jsonString || jsonString === '') return null;\n\n    if (this.object.type.indexOf('') >= 0) {\n      this._typePrefix = this.object.type.indexOf('') >= 0 ? '' : 'postcards/selfie/';\n    }\n\n    const json = JSON.parse(jsonString);\n    let url = json.w || '';\n    url = this.buildThumbnailUrl(url);\n    this._url = url;\n    return this._url;\n  }\n\n  buildThumbnailUrl(url) {\n    url = url.replace('.png', '_small.png');\n    if (url.indexOf('.png') === -1) url = url + '_small.png';\n    return url;\n  }\n\n}","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/room/object/visualization/furniture/FurnitureExternalImageVisualization.ts"],"names":["RoomObjectVariable","FurnitureDynamicThumbnailVisualization","FurnitureExternalImageVisualization","constructor","_url","_typePrefix","getThumbnailURL","object","jsonString","model","getValue","FURNITURE_DATA","type","indexOf","json","JSON","parse","url","w","buildThumbnailUrl","replace"],"mappings":"AAAA,SAASA,kBAAT,QAAmC,0BAAnC;AACA,SAASC,sCAAT,QAAuD,0CAAvD;AAEA,OAAO,MAAMC,mCAAN,SAAkDD,sCAAlD,CACP;AAIIE,EAAAA,WAAW,GACX;AACI;AADJ,SAJQC,IAIR;AAAA,SAHQC,WAGR;AAGI,SAAKD,IAAL,GAAY,IAAZ;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACH;;AAESC,EAAAA,eAAe,GACzB;AACI,QAAG,CAAC,KAAKC,MAAT,EAAiB,OAAO,IAAP;AAEjB,QAAG,KAAKH,IAAR,EAAc,OAAO,KAAKA,IAAZ;AAEd,UAAMI,UAAU,GAAG,KAAKD,MAAL,CAAYE,KAAZ,CAAkBC,QAAlB,CAAmCV,kBAAkB,CAACW,cAAtD,CAAnB;AAEA,QAAG,CAACH,UAAD,IAAeA,UAAU,KAAK,EAAjC,EAAqC,OAAO,IAAP;;AAErC,QAAG,KAAKD,MAAL,CAAYK,IAAZ,CAAiBC,OAAjB,CAAyB,EAAzB,KAAgC,CAAnC,EACA;AACI,WAAKR,WAAL,GAAoB,KAAKE,MAAL,CAAYK,IAAZ,CAAiBC,OAAjB,CAAyB,EAAzB,KAAgC,CAAjC,GAAsC,EAAtC,GAA2C,mBAA9D;AACH;;AAED,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWR,UAAX,CAAb;AAEA,QAAIS,GAAG,GAAIH,IAAI,CAACI,CAAL,IAAU,EAArB;AAEAD,IAAAA,GAAG,GAAG,KAAKE,iBAAL,CAAuBF,GAAvB,CAAN;AAEA,SAAKb,IAAL,GAAYa,GAAZ;AAEA,WAAO,KAAKb,IAAZ;AACH;;AAEOe,EAAAA,iBAAiB,CAACF,GAAD,EACzB;AACIA,IAAAA,GAAG,GAAGA,GAAG,CAACG,OAAJ,CAAY,MAAZ,EAAoB,YAApB,CAAN;AAEA,QAAGH,GAAG,CAACJ,OAAJ,CAAY,MAAZ,MAAwB,CAAC,CAA5B,EAA+BI,GAAG,GAAIA,GAAG,GAAG,YAAb;AAE/B,WAAOA,GAAP;AACH;;AA7CL","sourcesContent":["import { RoomObjectVariable } from '../../RoomObjectVariable';\r\nimport { FurnitureDynamicThumbnailVisualization } from './FurnitureDynamicThumbnailVisualization';\r\n\r\nexport class FurnitureExternalImageVisualization extends FurnitureDynamicThumbnailVisualization\r\n{\r\n    private _url: string;\r\n    private _typePrefix: string;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n\r\n        this._url = null;\r\n        this._typePrefix = null;\r\n    }\r\n\r\n    protected getThumbnailURL(): string\r\n    {\r\n        if(!this.object) return null;\r\n\r\n        if(this._url) return this._url;\r\n\r\n        const jsonString = this.object.model.getValue<string>(RoomObjectVariable.FURNITURE_DATA);\r\n\r\n        if(!jsonString || jsonString === '') return null;\r\n\r\n        if(this.object.type.indexOf('') >= 0)\r\n        {\r\n            this._typePrefix = (this.object.type.indexOf('') >= 0) ? '' : 'postcards/selfie/';\r\n        }\r\n\r\n        const json = JSON.parse(jsonString);\r\n\r\n        let url = (json.w || '');\r\n\r\n        url = this.buildThumbnailUrl(url);\r\n\r\n        this._url = url;\r\n\r\n        return this._url;\r\n    }\r\n\r\n    private buildThumbnailUrl(url: string): string\r\n    {\r\n        url = url.replace('.png', '_small.png');\r\n\r\n        if(url.indexOf('.png') === -1) url = (url + '_small.png');\r\n\r\n        return url;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}