{"ast":null,"code":"import { NitroManager } from '../../core/common/NitroManager';\nimport { FigureUpdateEvent, MysteryBoxKeysEvent } from '../communication';\nimport { AvailabilityStatusMessageEvent } from '../communication/messages/incoming/availability/AvailabilityStatusMessageEvent';\nimport { ChangeUserNameResultMessageEvent } from '../communication/messages/incoming/avatar/ChangeUserNameResultMessageEvent';\nimport { RoomReadyMessageEvent } from '../communication/messages/incoming/room/mapping/RoomReadyMessageEvent';\nimport { UserPermissionsEvent } from '../communication/messages/incoming/user/access/UserPermissionsEvent';\nimport { UserInfoEvent } from '../communication/messages/incoming/user/data/UserInfoEvent';\nimport { UserNameChangeMessageEvent } from '../communication/messages/incoming/user/data/UserNameChangeMessageEvent';\nimport { InClientLinkEvent } from '../communication/messages/incoming/user/InClientLinkEvent';\nimport { PetRespectComposer } from '../communication/messages/outgoing/pet/PetRespectComposer';\nimport { RoomUnitChatComposer } from '../communication/messages/outgoing/room/unit/chat/RoomUnitChatComposer';\nimport { RoomUnitChatStyleComposer } from '../communication/messages/outgoing/room/unit/chat/RoomUnitChatStyleComposer';\nimport { UserRespectComposer } from '../communication/messages/outgoing/user/UserRespectComposer';\nimport { NitroSettingsEvent } from '../events/NitroSettingsEvent';\nimport { Nitro } from '../Nitro';\nimport { HabboWebTools } from '../utils/HabboWebTools';\nimport { BadgeImageManager } from './badge/BadgeImageManager';\nimport { SecurityLevel } from './enum/SecurityLevel';\nimport { MysteryBoxKeysUpdateEvent } from './events';\nimport { SessionDataPreferencesEvent } from './events/SessionDataPreferencesEvent';\nimport { UserNameUpdateEvent } from './events/UserNameUpdateEvent';\nimport { FurnitureDataLoader } from './furniture/FurnitureDataLoader';\nimport { GroupInformationManager } from './GroupInformationManager';\nimport { IgnoredUsersManager } from './IgnoredUsersManager';\nimport { ProductDataLoader } from './product/ProductDataLoader';\nexport class SessionDataManager extends NitroManager {\n  constructor(communication) {\n    super();\n    this._communication = void 0;\n    this._userId = void 0;\n    this._name = void 0;\n    this._figure = void 0;\n    this._gender = void 0;\n    this._realName = void 0;\n    this._respectsReceived = void 0;\n    this._respectsLeft = void 0;\n    this._respectsPetLeft = void 0;\n    this._canChangeName = void 0;\n    this._ignoredUsersManager = void 0;\n    this._groupInformationManager = void 0;\n    this._clubLevel = void 0;\n    this._securityLevel = void 0;\n    this._isAmbassador = void 0;\n    this._systemOpen = void 0;\n    this._systemShutdown = void 0;\n    this._isAuthenticHabbo = void 0;\n    this._isRoomCameraFollowDisabled = void 0;\n    this._chatStyle = void 0;\n    this._uiFlags = void 0;\n    this._floorItems = void 0;\n    this._wallItems = void 0;\n    this._products = void 0;\n    this._furnitureData = void 0;\n    this._productData = void 0;\n    this._furnitureReady = void 0;\n    this._productsReady = void 0;\n    this._furnitureListenersNotified = void 0;\n    this._pendingFurnitureListeners = void 0;\n    this._pendingProductListeners = void 0;\n    this._badgeImageManager = void 0;\n    this.groupInformationManager = void 0;\n    this._communication = communication;\n    this.resetUserInfo();\n    this._ignoredUsersManager = new IgnoredUsersManager(this);\n    this._groupInformationManager = new GroupInformationManager(this);\n    this._clubLevel = 0;\n    this._securityLevel = 0;\n    this._isAmbassador = false;\n    this._systemOpen = false;\n    this._systemShutdown = false;\n    this._isAuthenticHabbo = false;\n    this._isRoomCameraFollowDisabled = false;\n    this._chatStyle = 0;\n    this._uiFlags = 0;\n    this._floorItems = new Map();\n    this._wallItems = new Map();\n    this._products = new Map();\n    this._furnitureData = null;\n    this._furnitureReady = false;\n    this._productsReady = false;\n    this._furnitureListenersNotified = false;\n    this._pendingFurnitureListeners = [];\n    this._pendingProductListeners = [];\n    this._badgeImageManager = null;\n    this.onFurnitureDataReadyEvent = this.onFurnitureDataReadyEvent.bind(this);\n    this.onProductDataReadyEvent = this.onProductDataReadyEvent.bind(this);\n    this.onNitroSettingsEvent = this.onNitroSettingsEvent.bind(this);\n  }\n\n  onInit() {\n    this.loadFurnitureData();\n    this.loadProductData();\n    this.loadBadgeImageManager();\n    this._ignoredUsersManager && this._ignoredUsersManager.init();\n    this._groupInformationManager && this._groupInformationManager.init();\n\n    this._communication.registerMessageEvent(new FigureUpdateEvent(this.onUserFigureEvent.bind(this)));\n\n    this._communication.registerMessageEvent(new UserInfoEvent(this.onUserInfoEvent.bind(this)));\n\n    this._communication.registerMessageEvent(new UserPermissionsEvent(this.onUserPermissionsEvent.bind(this)));\n\n    this._communication.registerMessageEvent(new AvailabilityStatusMessageEvent(this.onAvailabilityStatusMessageEvent.bind(this)));\n\n    this._communication.registerMessageEvent(new ChangeUserNameResultMessageEvent(this.onChangeNameUpdateEvent.bind(this)));\n\n    this._communication.registerMessageEvent(new UserNameChangeMessageEvent(this.onUserNameChangeMessageEvent.bind(this)));\n\n    this._communication.registerMessageEvent(new RoomReadyMessageEvent(this.onRoomModelNameEvent.bind(this)));\n\n    this._communication.registerMessageEvent(new InClientLinkEvent(this.onInClientLinkEvent.bind(this)));\n\n    this._communication.registerMessageEvent(new MysteryBoxKeysEvent(this.onMysteryBoxKeysEvent.bind(this)));\n\n    Nitro.instance.events.addEventListener(NitroSettingsEvent.SETTINGS_UPDATED, this.onNitroSettingsEvent);\n  }\n\n  onDispose() {\n    this.destroyFurnitureData();\n\n    if (this._ignoredUsersManager) {\n      this._ignoredUsersManager.dispose();\n\n      this._ignoredUsersManager = null;\n    }\n\n    if (this._groupInformationManager) {\n      this._groupInformationManager.dispose();\n\n      this._groupInformationManager = null;\n    }\n\n    Nitro.instance.events.removeEventListener(NitroSettingsEvent.SETTINGS_UPDATED, this.onNitroSettingsEvent);\n    super.onDispose();\n  }\n\n  resetUserInfo() {\n    this._userId = 0;\n    this._name = null;\n    this._figure = null;\n    this._gender = null;\n    this._realName = null;\n    this._canChangeName = false;\n  }\n\n  loadFurnitureData() {\n    this.destroyFurnitureData();\n    this._furnitureData = new FurnitureDataLoader(this._floorItems, this._wallItems, Nitro.instance.localization);\n\n    this._furnitureData.addEventListener(FurnitureDataLoader.FURNITURE_DATA_READY, this.onFurnitureDataReadyEvent);\n\n    this._furnitureData.loadFurnitureData(Nitro.instance.getConfiguration('furnidata.url'));\n  }\n\n  loadProductData() {\n    this.destroyProductData();\n    this._productData = new ProductDataLoader(this._products);\n\n    this._productData.addEventListener(ProductDataLoader.PDP_PRODUCT_DATA_READY, this.onProductDataReadyEvent);\n\n    this._productData.loadProductData(Nitro.instance.getConfiguration('productdata.url'));\n  }\n\n  loadBadgeImageManager() {\n    if (this._badgeImageManager) return;\n    this._badgeImageManager = new BadgeImageManager(Nitro.instance.core.asset, this);\n\n    this._badgeImageManager.init();\n  }\n\n  hasProductData(listener) {\n    if (this._productsReady) return true;\n    if (listener && this._pendingProductListeners.indexOf(listener) === -1) this._pendingProductListeners.push(listener);\n    return false;\n  }\n\n  getAllFurnitureData(listener) {\n    if (!this._furnitureReady) {\n      if (this._pendingFurnitureListeners.indexOf(listener) === -1) this._pendingFurnitureListeners.push(listener);\n      return null;\n    }\n\n    const furnitureData = [];\n\n    for (const data of this._floorItems.values()) {\n      if (!data) continue;\n      furnitureData.push(data);\n    }\n\n    for (const data of this._wallItems.values()) {\n      if (!data) continue;\n      furnitureData.push(data);\n    }\n\n    return furnitureData;\n  }\n\n  removePendingFurniDataListener(listener) {\n    if (!this._pendingFurnitureListeners) return;\n\n    const index = this._pendingFurnitureListeners.indexOf(listener);\n\n    if (index === -1) return;\n\n    this._pendingFurnitureListeners.splice(index, 1);\n  }\n\n  onUserFigureEvent(event) {\n    if (!event || !event.connection) return;\n    this._figure = event.getParser().figure;\n    this._gender = event.getParser().gender;\n    HabboWebTools.updateFigure(this._figure);\n  }\n\n  onUserInfoEvent(event) {\n    if (!event || !event.connection) return;\n    this.resetUserInfo();\n    const userInfo = event.getParser().userInfo;\n    if (!userInfo) return;\n    this._userId = userInfo.userId;\n    this._name = userInfo.username;\n    this._figure = userInfo.figure;\n    this._gender = userInfo.gender;\n    this._realName = userInfo.realName;\n    this._respectsReceived = userInfo.respectsReceived;\n    this._respectsLeft = userInfo.respectsRemaining;\n    this._respectsPetLeft = userInfo.respectsPetRemaining;\n    this._canChangeName = userInfo.canChangeName;\n    this._ignoredUsersManager && this._ignoredUsersManager.requestIgnoredUsers();\n  }\n\n  onUserPermissionsEvent(event) {\n    if (!event || !event.connection) return;\n    this._clubLevel = event.getParser().clubLevel;\n    this._securityLevel = event.getParser().securityLevel;\n    this._isAmbassador = event.getParser().isAmbassador;\n  }\n\n  onAvailabilityStatusMessageEvent(event) {\n    if (!event || !event.connection) return;\n    const parser = event.getParser();\n    if (!parser) return;\n    this._systemOpen = parser.isOpen;\n    this._systemShutdown = parser.onShutdown;\n    this._isAuthenticHabbo = parser.isAuthenticUser;\n  }\n\n  onChangeNameUpdateEvent(event) {\n    if (!event || !event.connection) return;\n    const parser = event.getParser();\n    if (!parser) return;\n    if (parser.resultCode !== ChangeUserNameResultMessageEvent.NAME_OK) return;\n    this._canChangeName = false;\n    this.events.dispatchEvent(new UserNameUpdateEvent(parser.name));\n  }\n\n  onUserNameChangeMessageEvent(event) {\n    if (!event || !event.connection) return;\n    const parser = event.getParser();\n    if (!parser) return;\n    if (parser.webId !== this.userId) return;\n    this._name = parser.newName;\n    this._canChangeName = false;\n    this.events.dispatchEvent(new UserNameUpdateEvent(this._name));\n  }\n\n  onRoomModelNameEvent(event) {\n    if (!event) return;\n    const parser = event.getParser();\n    if (!parser) return;\n    HabboWebTools.roomVisited(parser.roomId);\n  }\n\n  onFurnitureDataReadyEvent(event) {\n    this._furnitureData.removeEventListener(FurnitureDataLoader.FURNITURE_DATA_READY, this.onFurnitureDataReadyEvent);\n\n    this._furnitureReady = true;\n\n    if (!this._furnitureListenersNotified) {\n      this._furnitureListenersNotified = true;\n\n      if (this._pendingFurnitureListeners && this._pendingFurnitureListeners.length) {\n        for (const listener of this._pendingFurnitureListeners) listener && listener.loadFurnitureData();\n      }\n    }\n\n    this._pendingProductListeners = [];\n  }\n\n  onProductDataReadyEvent(event) {\n    this._productData.removeEventListener(ProductDataLoader.PDP_PRODUCT_DATA_READY, this.onProductDataReadyEvent);\n\n    this._productsReady = true;\n\n    for (const listener of this._pendingProductListeners) listener && listener.loadProductData();\n\n    this._pendingProductListeners = [];\n  }\n\n  onInClientLinkEvent(event) {\n    if (!event) return;\n    const parser = event.getParser();\n    if (!parser) return;\n    Nitro.instance.createLinkEvent(parser.link);\n  }\n\n  onMysteryBoxKeysEvent(event) {\n    if (!event) return;\n    const parser = event.getParser();\n    if (!parser) return;\n    this.events.dispatchEvent(new MysteryBoxKeysUpdateEvent(parser.boxColor, parser.keyColor));\n  }\n\n  onNitroSettingsEvent(event) {\n    this._isRoomCameraFollowDisabled = event.cameraFollow;\n    this._chatStyle = event.chatType;\n    this._uiFlags = event.flags;\n    this.events.dispatchEvent(new SessionDataPreferencesEvent(this._uiFlags));\n  }\n\n  destroyFurnitureData() {\n    if (!this._furnitureData) return;\n\n    this._furnitureData.dispose();\n\n    this._furnitureData = null;\n  }\n\n  destroyProductData() {\n    if (!this._productData) return;\n\n    this._productData.dispose();\n\n    this._productData = null;\n  }\n\n  getFloorItemData(id) {\n    const existing = this._floorItems.get(id);\n\n    if (!existing) return null;\n    return existing;\n  }\n\n  getFloorItemDataByName(name) {\n    if (!name || !this._floorItems || !this._floorItems.size) return null;\n\n    for (const item of this._floorItems.values()) {\n      if (!item || item.className !== name) continue;\n      return item;\n    }\n  }\n\n  getWallItemData(id) {\n    const existing = this._wallItems.get(id);\n\n    if (!existing) return null;\n    return existing;\n  }\n\n  getWallItemDataByName(name) {\n    if (!name || !this._wallItems || !this._wallItems.size) return null;\n\n    for (const item of this._wallItems.values()) {\n      if (!item || item.className !== name) continue;\n      return item;\n    }\n  }\n\n  getProductData(type) {\n    if (!this._productsReady) this.loadProductData();\n    return this._products.get(type);\n  }\n\n  getBadgeUrl(name) {\n    return this._badgeImageManager.getBadgeUrl(name);\n  }\n\n  getGroupBadgeUrl(name) {\n    return this._badgeImageManager.getBadgeUrl(name, BadgeImageManager.GROUP_BADGE);\n  }\n\n  getBadgeImage(name) {\n    return this._badgeImageManager.getBadgeImage(name);\n  }\n\n  getGroupBadgeImage(name) {\n    return this._badgeImageManager.getBadgeImage(name, BadgeImageManager.GROUP_BADGE);\n  }\n\n  loadBadgeImage(name) {\n    return this._badgeImageManager.loadBadgeImage(name);\n  }\n\n  loadGroupBadgeImage(name) {\n    return this._badgeImageManager.loadBadgeImage(name, BadgeImageManager.GROUP_BADGE);\n  }\n\n  hasSecurity(level) {\n    return this._securityLevel >= level;\n  }\n\n  giveRespect(userId) {\n    if (userId < 0 || this._respectsLeft <= 0) return;\n    this.send(new UserRespectComposer(userId));\n    this._respectsLeft--;\n  }\n\n  givePetRespect(petId) {\n    if (petId < 0 || this._respectsPetLeft <= 0) return;\n    this.send(new PetRespectComposer(petId));\n    this._respectsPetLeft--;\n  }\n\n  sendSpecialCommandMessage(text) {\n    let styleId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.send(new RoomUnitChatComposer(text));\n  }\n\n  sendChatStyleUpdate(styleId) {\n    this._chatStyle = styleId;\n    this.send(new RoomUnitChatStyleComposer(styleId));\n  }\n\n  ignoreUser(name) {\n    this._ignoredUsersManager && this._ignoredUsersManager.ignoreUser(name);\n  }\n\n  unignoreUser(name) {\n    this._ignoredUsersManager && this._ignoredUsersManager.unignoreUser(name);\n  }\n\n  isUserIgnored(name) {\n    return this._ignoredUsersManager && this._ignoredUsersManager.isIgnored(name);\n  }\n\n  getGroupBadge(groupId) {\n    return this._groupInformationManager && this._groupInformationManager.getGroupBadge(groupId);\n  }\n\n  send(composer) {\n    this._communication.connection.send(composer);\n  }\n\n  get communication() {\n    return this._communication;\n  }\n\n  get userId() {\n    return this._userId;\n  }\n\n  get userName() {\n    return this._name;\n  }\n\n  get figure() {\n    return this._figure;\n  }\n\n  get gender() {\n    return this._gender;\n  }\n\n  get realName() {\n    return this._realName;\n  }\n\n  get ignoredUsersManager() {\n    return this._ignoredUsersManager;\n  }\n\n  get respectsReceived() {\n    return this._respectsReceived;\n  }\n\n  get respectsLeft() {\n    return this._respectsLeft;\n  }\n\n  get respectsPetLeft() {\n    return this._respectsPetLeft;\n  }\n\n  get canChangeName() {\n    return this._canChangeName;\n  }\n\n  get clubLevel() {\n    return this._clubLevel;\n  }\n\n  get securityLevel() {\n    return this._securityLevel;\n  }\n\n  get isAmbassador() {\n    return this._isAmbassador;\n  }\n\n  get isSystemOpen() {\n    return this._systemOpen;\n  }\n\n  get isSystemShutdown() {\n    return this._systemShutdown;\n  }\n\n  get isAuthenticHabbo() {\n    return this._isAuthenticHabbo;\n  }\n\n  get isModerator() {\n    return this._securityLevel >= SecurityLevel.MODERATOR;\n  }\n\n  get isGodMode() {\n    return this.securityLevel >= SecurityLevel.MODERATOR;\n  }\n\n  get isCameraFollowDisabled() {\n    return this._isRoomCameraFollowDisabled;\n  }\n\n  get chatStyle() {\n    return this._chatStyle;\n  }\n\n  get uiFlags() {\n    return this._uiFlags;\n  }\n\n}","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/session/SessionDataManager.ts"],"names":["NitroManager","FigureUpdateEvent","MysteryBoxKeysEvent","AvailabilityStatusMessageEvent","ChangeUserNameResultMessageEvent","RoomReadyMessageEvent","UserPermissionsEvent","UserInfoEvent","UserNameChangeMessageEvent","InClientLinkEvent","PetRespectComposer","RoomUnitChatComposer","RoomUnitChatStyleComposer","UserRespectComposer","NitroSettingsEvent","Nitro","HabboWebTools","BadgeImageManager","SecurityLevel","MysteryBoxKeysUpdateEvent","SessionDataPreferencesEvent","UserNameUpdateEvent","FurnitureDataLoader","GroupInformationManager","IgnoredUsersManager","ProductDataLoader","SessionDataManager","constructor","communication","_communication","_userId","_name","_figure","_gender","_realName","_respectsReceived","_respectsLeft","_respectsPetLeft","_canChangeName","_ignoredUsersManager","_groupInformationManager","_clubLevel","_securityLevel","_isAmbassador","_systemOpen","_systemShutdown","_isAuthenticHabbo","_isRoomCameraFollowDisabled","_chatStyle","_uiFlags","_floorItems","_wallItems","_products","_furnitureData","_productData","_furnitureReady","_productsReady","_furnitureListenersNotified","_pendingFurnitureListeners","_pendingProductListeners","_badgeImageManager","groupInformationManager","resetUserInfo","Map","onFurnitureDataReadyEvent","bind","onProductDataReadyEvent","onNitroSettingsEvent","onInit","loadFurnitureData","loadProductData","loadBadgeImageManager","init","registerMessageEvent","onUserFigureEvent","onUserInfoEvent","onUserPermissionsEvent","onAvailabilityStatusMessageEvent","onChangeNameUpdateEvent","onUserNameChangeMessageEvent","onRoomModelNameEvent","onInClientLinkEvent","onMysteryBoxKeysEvent","instance","events","addEventListener","SETTINGS_UPDATED","onDispose","destroyFurnitureData","dispose","removeEventListener","localization","FURNITURE_DATA_READY","getConfiguration","destroyProductData","PDP_PRODUCT_DATA_READY","core","asset","hasProductData","listener","indexOf","push","getAllFurnitureData","furnitureData","data","values","removePendingFurniDataListener","index","splice","event","connection","getParser","figure","gender","updateFigure","userInfo","userId","username","realName","respectsReceived","respectsRemaining","respectsPetRemaining","canChangeName","requestIgnoredUsers","clubLevel","securityLevel","isAmbassador","parser","isOpen","onShutdown","isAuthenticUser","resultCode","NAME_OK","dispatchEvent","name","webId","newName","roomVisited","roomId","length","createLinkEvent","link","boxColor","keyColor","cameraFollow","chatType","flags","getFloorItemData","id","existing","get","getFloorItemDataByName","size","item","className","getWallItemData","getWallItemDataByName","getProductData","type","getBadgeUrl","getGroupBadgeUrl","GROUP_BADGE","getBadgeImage","getGroupBadgeImage","loadBadgeImage","loadGroupBadgeImage","hasSecurity","level","giveRespect","send","givePetRespect","petId","sendSpecialCommandMessage","text","styleId","sendChatStyleUpdate","ignoreUser","unignoreUser","isUserIgnored","isIgnored","getGroupBadge","groupId","composer","userName","ignoredUsersManager","respectsLeft","respectsPetLeft","isSystemOpen","isSystemShutdown","isAuthenticHabbo","isModerator","MODERATOR","isGodMode","isCameraFollowDisabled","chatStyle","uiFlags"],"mappings":"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","sourcesContent":["import { Resource, Texture } from '@pixi/core';\r\nimport { NitroManager } from '../../core/common/NitroManager';\r\nimport { IMessageComposer } from '../../core/communication/messages/IMessageComposer';\r\nimport { NitroEvent } from '../../core/events/NitroEvent';\r\nimport { FigureUpdateEvent, MysteryBoxKeysEvent } from '../communication';\r\nimport { INitroCommunicationManager } from '../communication/INitroCommunicationManager';\r\nimport { AvailabilityStatusMessageEvent } from '../communication/messages/incoming/availability/AvailabilityStatusMessageEvent';\r\nimport { ChangeUserNameResultMessageEvent } from '../communication/messages/incoming/avatar/ChangeUserNameResultMessageEvent';\r\nimport { RoomReadyMessageEvent } from '../communication/messages/incoming/room/mapping/RoomReadyMessageEvent';\r\nimport { UserPermissionsEvent } from '../communication/messages/incoming/user/access/UserPermissionsEvent';\r\nimport { UserInfoEvent } from '../communication/messages/incoming/user/data/UserInfoEvent';\r\nimport { UserNameChangeMessageEvent } from '../communication/messages/incoming/user/data/UserNameChangeMessageEvent';\r\nimport { InClientLinkEvent } from '../communication/messages/incoming/user/InClientLinkEvent';\r\nimport { PetRespectComposer } from '../communication/messages/outgoing/pet/PetRespectComposer';\r\nimport { RoomUnitChatComposer } from '../communication/messages/outgoing/room/unit/chat/RoomUnitChatComposer';\r\nimport { RoomUnitChatStyleComposer } from '../communication/messages/outgoing/room/unit/chat/RoomUnitChatStyleComposer';\r\nimport { UserRespectComposer } from '../communication/messages/outgoing/user/UserRespectComposer';\r\nimport { NitroSettingsEvent } from '../events/NitroSettingsEvent';\r\nimport { Nitro } from '../Nitro';\r\nimport { HabboWebTools } from '../utils/HabboWebTools';\r\nimport { BadgeImageManager } from './badge/BadgeImageManager';\r\nimport { SecurityLevel } from './enum/SecurityLevel';\r\nimport { MysteryBoxKeysUpdateEvent } from './events';\r\nimport { SessionDataPreferencesEvent } from './events/SessionDataPreferencesEvent';\r\nimport { UserNameUpdateEvent } from './events/UserNameUpdateEvent';\r\nimport { FurnitureDataLoader } from './furniture/FurnitureDataLoader';\r\nimport { IFurnitureData } from './furniture/IFurnitureData';\r\nimport { IFurnitureDataListener } from './furniture/IFurnitureDataListener';\r\nimport { GroupInformationManager } from './GroupInformationManager';\r\nimport { IgnoredUsersManager } from './IgnoredUsersManager';\r\nimport { ISessionDataManager } from './ISessionDataManager';\r\nimport { IProductData } from './product/IProductData';\r\nimport { IProductDataListener } from './product/IProductDataListener';\r\nimport { ProductDataLoader } from './product/ProductDataLoader';\r\n\r\nexport class SessionDataManager extends NitroManager implements ISessionDataManager\r\n{\r\n    private _communication: INitroCommunicationManager;\r\n\r\n    private _userId: number;\r\n    private _name: string;\r\n    private _figure: string;\r\n    private _gender: string;\r\n    private _realName: string;\r\n    private _respectsReceived: number;\r\n    private _respectsLeft: number;\r\n    private _respectsPetLeft: number;\r\n    private _canChangeName: boolean;\r\n\r\n    private _ignoredUsersManager: IgnoredUsersManager;\r\n    private _groupInformationManager: GroupInformationManager;\r\n\r\n    private _clubLevel: number;\r\n    private _securityLevel: number;\r\n    private _isAmbassador: boolean;\r\n\r\n    private _systemOpen: boolean;\r\n    private _systemShutdown: boolean;\r\n    private _isAuthenticHabbo: boolean;\r\n    private _isRoomCameraFollowDisabled: boolean;\r\n    private _chatStyle: number;\r\n    private _uiFlags: number;\r\n\r\n    private _floorItems: Map<number, IFurnitureData>;\r\n    private _wallItems: Map<number, IFurnitureData>;\r\n    private _products: Map<string, IProductData>;\r\n    private _furnitureData: FurnitureDataLoader;\r\n    private _productData: ProductDataLoader;\r\n\r\n    private _furnitureReady: boolean;\r\n    private _productsReady: boolean;\r\n    private _furnitureListenersNotified: boolean;\r\n    private _pendingFurnitureListeners: IFurnitureDataListener[];\r\n    private _pendingProductListeners: IProductDataListener[];\r\n\r\n    private _badgeImageManager: BadgeImageManager;\r\n\r\n    constructor(communication: INitroCommunicationManager)\r\n    {\r\n        super();\r\n\r\n        this._communication = communication;\r\n\r\n        this.resetUserInfo();\r\n\r\n        this._ignoredUsersManager = new IgnoredUsersManager(this);\r\n        this._groupInformationManager = new GroupInformationManager(this);\r\n\r\n        this._clubLevel = 0;\r\n        this._securityLevel = 0;\r\n        this._isAmbassador = false;\r\n\r\n        this._systemOpen = false;\r\n        this._systemShutdown = false;\r\n        this._isAuthenticHabbo = false;\r\n        this._isRoomCameraFollowDisabled = false;\r\n        this._chatStyle = 0;\r\n        this._uiFlags = 0;\r\n\r\n        this._floorItems = new Map();\r\n        this._wallItems = new Map();\r\n        this._products = new Map();\r\n        this._furnitureData = null;\r\n\r\n        this._furnitureReady = false;\r\n        this._productsReady = false;\r\n        this._furnitureListenersNotified = false;\r\n        this._pendingFurnitureListeners = [];\r\n        this._pendingProductListeners = [];\r\n\r\n        this._badgeImageManager = null;\r\n\r\n        this.onFurnitureDataReadyEvent = this.onFurnitureDataReadyEvent.bind(this);\r\n        this.onProductDataReadyEvent = this.onProductDataReadyEvent.bind(this);\r\n        this.onNitroSettingsEvent = this.onNitroSettingsEvent.bind(this);\r\n    }\r\n    groupInformationManager: GroupInformationManager;\r\n\r\n    protected onInit(): void\r\n    {\r\n        this.loadFurnitureData();\r\n        this.loadProductData();\r\n        this.loadBadgeImageManager();\r\n\r\n        (this._ignoredUsersManager && this._ignoredUsersManager.init());\r\n        (this._groupInformationManager && this._groupInformationManager.init());\r\n\r\n        this._communication.registerMessageEvent(new FigureUpdateEvent(this.onUserFigureEvent.bind(this)));\r\n        this._communication.registerMessageEvent(new UserInfoEvent(this.onUserInfoEvent.bind(this)));\r\n        this._communication.registerMessageEvent(new UserPermissionsEvent(this.onUserPermissionsEvent.bind(this)));\r\n        this._communication.registerMessageEvent(new AvailabilityStatusMessageEvent(this.onAvailabilityStatusMessageEvent.bind(this)));\r\n        this._communication.registerMessageEvent(new ChangeUserNameResultMessageEvent(this.onChangeNameUpdateEvent.bind(this)));\r\n        this._communication.registerMessageEvent(new UserNameChangeMessageEvent(this.onUserNameChangeMessageEvent.bind(this)));\r\n        this._communication.registerMessageEvent(new RoomReadyMessageEvent(this.onRoomModelNameEvent.bind(this)));\r\n        this._communication.registerMessageEvent(new InClientLinkEvent(this.onInClientLinkEvent.bind(this)));\r\n        this._communication.registerMessageEvent(new MysteryBoxKeysEvent(this.onMysteryBoxKeysEvent.bind(this)));\r\n\r\n        Nitro.instance.events.addEventListener(NitroSettingsEvent.SETTINGS_UPDATED, this.onNitroSettingsEvent);\r\n    }\r\n\r\n    protected onDispose(): void\r\n    {\r\n        this.destroyFurnitureData();\r\n\r\n        if(this._ignoredUsersManager)\r\n        {\r\n            this._ignoredUsersManager.dispose();\r\n\r\n            this._ignoredUsersManager = null;\r\n        }\r\n\r\n        if(this._groupInformationManager)\r\n        {\r\n            this._groupInformationManager.dispose();\r\n\r\n            this._groupInformationManager = null;\r\n        }\r\n\r\n        Nitro.instance.events.removeEventListener(NitroSettingsEvent.SETTINGS_UPDATED, this.onNitroSettingsEvent);\r\n\r\n        super.onDispose();\r\n    }\r\n\r\n    private resetUserInfo(): void\r\n    {\r\n        this._userId = 0;\r\n        this._name = null;\r\n        this._figure = null;\r\n        this._gender = null;\r\n        this._realName = null;\r\n        this._canChangeName = false;\r\n    }\r\n\r\n    private loadFurnitureData(): void\r\n    {\r\n        this.destroyFurnitureData();\r\n\r\n        this._furnitureData = new FurnitureDataLoader(this._floorItems, this._wallItems, Nitro.instance.localization);\r\n\r\n        this._furnitureData.addEventListener(FurnitureDataLoader.FURNITURE_DATA_READY, this.onFurnitureDataReadyEvent);\r\n\r\n        this._furnitureData.loadFurnitureData(Nitro.instance.getConfiguration<string>('furnidata.url'));\r\n    }\r\n\r\n    private loadProductData(): void\r\n    {\r\n        this.destroyProductData();\r\n\r\n        this._productData = new ProductDataLoader(this._products);\r\n\r\n        this._productData.addEventListener(ProductDataLoader.PDP_PRODUCT_DATA_READY, this.onProductDataReadyEvent);\r\n\r\n        this._productData.loadProductData(Nitro.instance.getConfiguration<string>('productdata.url'));\r\n    }\r\n\r\n    private loadBadgeImageManager(): void\r\n    {\r\n        if(this._badgeImageManager) return;\r\n\r\n        this._badgeImageManager = new BadgeImageManager(Nitro.instance.core.asset, this);\r\n        this._badgeImageManager.init();\r\n    }\r\n\r\n    public hasProductData(listener: IProductDataListener): boolean\r\n    {\r\n        if(this._productsReady) return true;\r\n\r\n        if(listener && (this._pendingProductListeners.indexOf(listener) === -1)) this._pendingProductListeners.push(listener);\r\n\r\n        return false;\r\n    }\r\n\r\n    public getAllFurnitureData(listener: IFurnitureDataListener): IFurnitureData[]\r\n    {\r\n        if(!this._furnitureReady)\r\n        {\r\n            if(this._pendingFurnitureListeners.indexOf(listener) === -1) this._pendingFurnitureListeners.push(listener);\r\n\r\n            return null;\r\n        }\r\n\r\n        const furnitureData: IFurnitureData[] = [];\r\n\r\n        for(const data of this._floorItems.values())\r\n        {\r\n            if(!data) continue;\r\n\r\n            furnitureData.push(data);\r\n        }\r\n\r\n        for(const data of this._wallItems.values())\r\n        {\r\n            if(!data) continue;\r\n\r\n            furnitureData.push(data);\r\n        }\r\n\r\n        return furnitureData;\r\n    }\r\n\r\n    public removePendingFurniDataListener(listener: IFurnitureDataListener): void\r\n    {\r\n        if(!this._pendingFurnitureListeners) return;\r\n\r\n        const index = this._pendingFurnitureListeners.indexOf(listener);\r\n\r\n        if(index === -1) return;\r\n\r\n        this._pendingFurnitureListeners.splice(index, 1);\r\n    }\r\n\r\n    private onUserFigureEvent(event: FigureUpdateEvent): void\r\n    {\r\n        if(!event || !event.connection) return;\r\n\r\n        this._figure = event.getParser().figure;\r\n        this._gender = event.getParser().gender;\r\n\r\n        HabboWebTools.updateFigure(this._figure);\r\n    }\r\n\r\n    private onUserInfoEvent(event: UserInfoEvent): void\r\n    {\r\n        if(!event || !event.connection) return;\r\n\r\n        this.resetUserInfo();\r\n\r\n        const userInfo = event.getParser().userInfo;\r\n\r\n        if(!userInfo) return;\r\n\r\n        this._userId = userInfo.userId;\r\n        this._name = userInfo.username;\r\n        this._figure = userInfo.figure;\r\n        this._gender = userInfo.gender;\r\n        this._realName = userInfo.realName;\r\n        this._respectsReceived = userInfo.respectsReceived;\r\n        this._respectsLeft = userInfo.respectsRemaining;\r\n        this._respectsPetLeft = userInfo.respectsPetRemaining;\r\n        this._canChangeName = userInfo.canChangeName;\r\n\r\n        (this._ignoredUsersManager && this._ignoredUsersManager.requestIgnoredUsers());\r\n    }\r\n\r\n    private onUserPermissionsEvent(event: UserPermissionsEvent): void\r\n    {\r\n        if(!event || !event.connection) return;\r\n\r\n        this._clubLevel = event.getParser().clubLevel;\r\n        this._securityLevel = event.getParser().securityLevel;\r\n        this._isAmbassador = event.getParser().isAmbassador;\r\n    }\r\n\r\n    private onAvailabilityStatusMessageEvent(event: AvailabilityStatusMessageEvent): void\r\n    {\r\n        if(!event || !event.connection) return;\r\n\r\n        const parser = event.getParser();\r\n\r\n        if(!parser) return;\r\n\r\n        this._systemOpen = parser.isOpen;\r\n        this._systemShutdown = parser.onShutdown;\r\n        this._isAuthenticHabbo = parser.isAuthenticUser;\r\n    }\r\n\r\n    private onChangeNameUpdateEvent(event: ChangeUserNameResultMessageEvent): void\r\n    {\r\n        if(!event || !event.connection) return;\r\n\r\n        const parser = event.getParser();\r\n\r\n        if(!parser) return;\r\n\r\n        if(parser.resultCode !== ChangeUserNameResultMessageEvent.NAME_OK) return;\r\n\r\n        this._canChangeName = false;\r\n\r\n        this.events.dispatchEvent(new UserNameUpdateEvent(parser.name));\r\n    }\r\n\r\n    private onUserNameChangeMessageEvent(event: UserNameChangeMessageEvent): void\r\n    {\r\n        if(!event || !event.connection) return;\r\n\r\n        const parser = event.getParser();\r\n\r\n        if(!parser) return;\r\n\r\n        if(parser.webId !== this.userId) return;\r\n\r\n        this._name = parser.newName;\r\n        this._canChangeName = false;\r\n\r\n        this.events.dispatchEvent(new UserNameUpdateEvent(this._name));\r\n    }\r\n\r\n    private onRoomModelNameEvent(event: RoomReadyMessageEvent): void\r\n    {\r\n        if(!event) return;\r\n\r\n        const parser = event.getParser();\r\n\r\n        if(!parser) return;\r\n\r\n        HabboWebTools.roomVisited(parser.roomId);\r\n    }\r\n\r\n    private onFurnitureDataReadyEvent(event: NitroEvent): void\r\n    {\r\n        this._furnitureData.removeEventListener(FurnitureDataLoader.FURNITURE_DATA_READY, this.onFurnitureDataReadyEvent);\r\n\r\n        this._furnitureReady = true;\r\n\r\n        if(!this._furnitureListenersNotified)\r\n        {\r\n            this._furnitureListenersNotified = true;\r\n\r\n            if(this._pendingFurnitureListeners && this._pendingFurnitureListeners.length)\r\n            {\r\n                for(const listener of this._pendingFurnitureListeners) listener && listener.loadFurnitureData();\r\n            }\r\n        }\r\n\r\n        this._pendingProductListeners = [];\r\n    }\r\n\r\n    private onProductDataReadyEvent(event: NitroEvent): void\r\n    {\r\n        this._productData.removeEventListener(ProductDataLoader.PDP_PRODUCT_DATA_READY, this.onProductDataReadyEvent);\r\n\r\n        this._productsReady = true;\r\n\r\n        for(const listener of this._pendingProductListeners) listener && listener.loadProductData();\r\n\r\n        this._pendingProductListeners = [];\r\n    }\r\n\r\n    private onInClientLinkEvent(event: InClientLinkEvent):void\r\n    {\r\n        if(!event) return;\r\n\r\n        const parser = event.getParser();\r\n\r\n        if(!parser) return;\r\n\r\n        Nitro.instance.createLinkEvent(parser.link);\r\n    }\r\n\r\n    private onMysteryBoxKeysEvent(event: MysteryBoxKeysEvent): void\r\n    {\r\n        if(!event) return;\r\n\r\n        const parser = event.getParser();\r\n\r\n        if(!parser) return;\r\n\r\n        this.events.dispatchEvent(new MysteryBoxKeysUpdateEvent(parser.boxColor, parser.keyColor));\r\n    }\r\n\r\n    private onNitroSettingsEvent(event: NitroSettingsEvent): void\r\n    {\r\n        this._isRoomCameraFollowDisabled = event.cameraFollow;\r\n        this._chatStyle = event.chatType;\r\n        this._uiFlags = event.flags;\r\n\r\n        this.events.dispatchEvent(new SessionDataPreferencesEvent(this._uiFlags));\r\n    }\r\n\r\n    private destroyFurnitureData(): void\r\n    {\r\n        if(!this._furnitureData) return;\r\n\r\n        this._furnitureData.dispose();\r\n\r\n        this._furnitureData = null;\r\n    }\r\n\r\n    private destroyProductData(): void\r\n    {\r\n        if(!this._productData) return;\r\n\r\n        this._productData.dispose();\r\n\r\n        this._productData = null;\r\n    }\r\n\r\n    public getFloorItemData(id: number): IFurnitureData\r\n    {\r\n        const existing = this._floorItems.get(id);\r\n\r\n        if(!existing) return null;\r\n\r\n        return existing;\r\n    }\r\n\r\n    public getFloorItemDataByName(name: string): IFurnitureData\r\n    {\r\n        if(!name || !this._floorItems || !this._floorItems.size) return null;\r\n\r\n        for(const item of this._floorItems.values())\r\n        {\r\n            if(!item || (item.className !== name)) continue;\r\n\r\n            return item;\r\n        }\r\n    }\r\n\r\n    public getWallItemData(id: number): IFurnitureData\r\n    {\r\n        const existing = this._wallItems.get(id);\r\n\r\n        if(!existing) return null;\r\n\r\n        return existing;\r\n    }\r\n\r\n    public getWallItemDataByName(name: string): IFurnitureData\r\n    {\r\n        if(!name || !this._wallItems || !this._wallItems.size) return null;\r\n\r\n        for(const item of this._wallItems.values())\r\n        {\r\n            if(!item || (item.className !== name)) continue;\r\n\r\n            return item;\r\n        }\r\n    }\r\n\r\n    public getProductData(type: string): IProductData\r\n    {\r\n        if(!this._productsReady) this.loadProductData();\r\n\r\n        return this._products.get(type);\r\n    }\r\n\r\n    public getBadgeUrl(name: string): string\r\n    {\r\n        return this._badgeImageManager.getBadgeUrl(name);\r\n    }\r\n\r\n    public getGroupBadgeUrl(name: string): string\r\n    {\r\n        return this._badgeImageManager.getBadgeUrl(name, BadgeImageManager.GROUP_BADGE);\r\n    }\r\n\r\n    public getBadgeImage(name: string): Texture<Resource>\r\n    {\r\n        return this._badgeImageManager.getBadgeImage(name);\r\n    }\r\n\r\n    public getGroupBadgeImage(name: string): Texture<Resource>\r\n    {\r\n        return this._badgeImageManager.getBadgeImage(name, BadgeImageManager.GROUP_BADGE);\r\n    }\r\n\r\n    public loadBadgeImage(name: string): string\r\n    {\r\n        return this._badgeImageManager.loadBadgeImage(name);\r\n    }\r\n\r\n    public loadGroupBadgeImage(name: string): string\r\n    {\r\n        return this._badgeImageManager.loadBadgeImage(name, BadgeImageManager.GROUP_BADGE);\r\n    }\r\n\r\n    public hasSecurity(level: number): boolean\r\n    {\r\n        return this._securityLevel >= level;\r\n    }\r\n\r\n    public giveRespect(userId: number): void\r\n    {\r\n        if((userId < 0) || (this._respectsLeft <= 0)) return;\r\n\r\n        this.send(new UserRespectComposer(userId));\r\n\r\n        this._respectsLeft--;\r\n    }\r\n\r\n    public givePetRespect(petId: number): void\r\n    {\r\n        if((petId < 0) || (this._respectsPetLeft <= 0)) return;\r\n\r\n        this.send(new PetRespectComposer(petId));\r\n\r\n        this._respectsPetLeft--;\r\n    }\r\n\r\n    public sendSpecialCommandMessage(text: string, styleId: number = 0): void\r\n    {\r\n        this.send(new RoomUnitChatComposer(text));\r\n    }\r\n\r\n    public sendChatStyleUpdate(styleId: number): void\r\n    {\r\n        this._chatStyle = styleId;\r\n\r\n        this.send(new RoomUnitChatStyleComposer(styleId));\r\n    }\r\n\r\n    public ignoreUser(name: string): void\r\n    {\r\n        (this._ignoredUsersManager && this._ignoredUsersManager.ignoreUser(name));\r\n    }\r\n\r\n    public unignoreUser(name: string): void\r\n    {\r\n        (this._ignoredUsersManager && this._ignoredUsersManager.unignoreUser(name));\r\n    }\r\n\r\n    public isUserIgnored(name: string): boolean\r\n    {\r\n        return (this._ignoredUsersManager && this._ignoredUsersManager.isIgnored(name));\r\n    }\r\n\r\n    public getGroupBadge(groupId: number): string\r\n    {\r\n        return (this._groupInformationManager && this._groupInformationManager.getGroupBadge(groupId));\r\n    }\r\n\r\n    public send(composer: IMessageComposer<unknown[]>): void\r\n    {\r\n        this._communication.connection.send(composer);\r\n    }\r\n\r\n    public get communication(): INitroCommunicationManager\r\n    {\r\n        return this._communication;\r\n    }\r\n\r\n    public get userId(): number\r\n    {\r\n        return this._userId;\r\n    }\r\n\r\n    public get userName(): string\r\n    {\r\n        return this._name;\r\n    }\r\n\r\n    public get figure(): string\r\n    {\r\n        return this._figure;\r\n    }\r\n\r\n    public get gender(): string\r\n    {\r\n        return this._gender;\r\n    }\r\n\r\n    public get realName(): string\r\n    {\r\n        return this._realName;\r\n    }\r\n\r\n    public get ignoredUsersManager(): IgnoredUsersManager\r\n    {\r\n        return this._ignoredUsersManager;\r\n    }\r\n\r\n    public get respectsReceived(): number\r\n    {\r\n        return this._respectsReceived;\r\n    }\r\n\r\n    public get respectsLeft(): number\r\n    {\r\n        return this._respectsLeft;\r\n    }\r\n\r\n    public get respectsPetLeft(): number\r\n    {\r\n        return this._respectsPetLeft;\r\n    }\r\n\r\n    public get canChangeName(): boolean\r\n    {\r\n        return this._canChangeName;\r\n    }\r\n\r\n    public get clubLevel(): number\r\n    {\r\n        return this._clubLevel;\r\n    }\r\n\r\n    public get securityLevel(): number\r\n    {\r\n        return this._securityLevel;\r\n    }\r\n\r\n    public get isAmbassador(): boolean\r\n    {\r\n        return this._isAmbassador;\r\n    }\r\n\r\n    public get isSystemOpen(): boolean\r\n    {\r\n        return this._systemOpen;\r\n    }\r\n\r\n    public get isSystemShutdown(): boolean\r\n    {\r\n        return this._systemShutdown;\r\n    }\r\n\r\n    public get isAuthenticHabbo(): boolean\r\n    {\r\n        return this._isAuthenticHabbo;\r\n    }\r\n\r\n    public get isModerator(): boolean\r\n    {\r\n        return (this._securityLevel >= SecurityLevel.MODERATOR);\r\n    }\r\n\r\n    public get isGodMode(): boolean\r\n    {\r\n        return this.securityLevel >= SecurityLevel.MODERATOR;\r\n    }\r\n\r\n    public get isCameraFollowDisabled(): boolean\r\n    {\r\n        return this._isRoomCameraFollowDisabled;\r\n    }\r\n\r\n    public get chatStyle(): number\r\n    {\r\n        return this._chatStyle;\r\n    }\r\n\r\n    public get uiFlags(): number\r\n    {\r\n        return this._uiFlags;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}