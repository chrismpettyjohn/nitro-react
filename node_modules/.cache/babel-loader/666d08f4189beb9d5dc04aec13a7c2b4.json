{"ast":null,"code":"import { RoomObjectVariable } from '../../RoomObjectVariable';\nimport { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\nexport class FurnitureVoteMajorityVisualization extends FurnitureAnimatedVisualization {\n  getFrameNumber(scale, layerId) {\n    const result = this.object.model.getValue(RoomObjectVariable.FURNITURE_VOTE_MAJORITY_RESULT);\n    const tag = this.getLayerTag(scale, this.direction, layerId);\n\n    switch (tag) {\n      case FurnitureVoteMajorityVisualization.ONES_SPRITE:\n        return result % 10;\n\n      case FurnitureVoteMajorityVisualization.TENS_SPRITE:\n        return result / 10 % 10;\n\n      case FurnitureVoteMajorityVisualization.HUNDREDS_SPRITE:\n        return result / 100 % 10;\n\n      default:\n        return super.getFrameNumber(scale, layerId);\n    }\n  }\n\n  getLayerAlpha(scale, direction, layerId) {\n    const result = this.object.model.getValue(RoomObjectVariable.FURNITURE_VOTE_MAJORITY_RESULT);\n\n    if (!(FurnitureVoteMajorityVisualization.HIDE_RESULTS_STATES.indexOf(this.object.getState(0)) === -1) || result === FurnitureVoteMajorityVisualization.HIDE_RESULTS_VALUE) {\n      const tag = this.getLayerTag(scale, direction, layerId);\n\n      switch (tag) {\n        case FurnitureVoteMajorityVisualization.ONES_SPRITE:\n        case FurnitureVoteMajorityVisualization.TENS_SPRITE:\n        case FurnitureVoteMajorityVisualization.HUNDREDS_SPRITE:\n          return 0;\n      }\n    }\n\n    return super.getLayerAlpha(scale, direction, layerId);\n  }\n\n}\nFurnitureVoteMajorityVisualization.ONES_SPRITE = 'ones_sprite';\nFurnitureVoteMajorityVisualization.TENS_SPRITE = 'tens_sprite';\nFurnitureVoteMajorityVisualization.HUNDREDS_SPRITE = 'hundreds_sprite';\nFurnitureVoteMajorityVisualization.HIDE_RESULTS_STATES = [-1, 1];\nFurnitureVoteMajorityVisualization.HIDE_RESULTS_VALUE = -1;","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/room/object/visualization/furniture/FurnitureVoteMajorityVisualization.ts"],"names":["RoomObjectVariable","FurnitureAnimatedVisualization","FurnitureVoteMajorityVisualization","getFrameNumber","scale","layerId","result","object","model","getValue","FURNITURE_VOTE_MAJORITY_RESULT","tag","getLayerTag","direction","ONES_SPRITE","TENS_SPRITE","HUNDREDS_SPRITE","getLayerAlpha","HIDE_RESULTS_STATES","indexOf","getState","HIDE_RESULTS_VALUE"],"mappings":"AAAA,SAASA,kBAAT,QAAmC,0BAAnC;AACA,SAASC,8BAAT,QAA+C,kCAA/C;AAEA,OAAO,MAAMC,kCAAN,SAAiDD,8BAAjD,CACP;AAOcE,EAAAA,cAAc,CAACC,KAAD,EAAgBC,OAAhB,EACxB;AACI,UAAMC,MAAM,GAAG,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAAmCT,kBAAkB,CAACU,8BAAtD,CAAf;AACA,UAAMC,GAAG,GAAG,KAAKC,WAAL,CAAiBR,KAAjB,EAAwB,KAAKS,SAA7B,EAAwCR,OAAxC,CAAZ;;AAEA,YAAOM,GAAP;AAEI,WAAKT,kCAAkC,CAACY,WAAxC;AAAqD,eAAQR,MAAM,GAAG,EAAjB;;AACrD,WAAKJ,kCAAkC,CAACa,WAAxC;AAAqD,eAAST,MAAM,GAAG,EAAV,GAAgB,EAAxB;;AACrD,WAAKJ,kCAAkC,CAACc,eAAxC;AAAyD,eAASV,MAAM,GAAG,GAAV,GAAiB,EAAzB;;AACzD;AAAS,eAAO,MAAMH,cAAN,CAAqBC,KAArB,EAA4BC,OAA5B,CAAP;AALb;AAOH;;AAESY,EAAAA,aAAa,CAACb,KAAD,EAAgBS,SAAhB,EAAmCR,OAAnC,EACvB;AACI,UAAMC,MAAM,GAAG,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAAmCT,kBAAkB,CAACU,8BAAtD,CAAf;;AAEA,QAAK,EAAER,kCAAkC,CAACgB,mBAAnC,CAAuDC,OAAvD,CAA+D,KAAKZ,MAAL,CAAYa,QAAZ,CAAqB,CAArB,CAA/D,MAA4F,CAAC,CAA/F,CAAD,IAAwGd,MAAM,KAAKJ,kCAAkC,CAACmB,kBAA1J,EACA;AACI,YAAMV,GAAG,GAAG,KAAKC,WAAL,CAAiBR,KAAjB,EAAwBS,SAAxB,EAAmCR,OAAnC,CAAZ;;AAEA,cAAOM,GAAP;AAEI,aAAKT,kCAAkC,CAACY,WAAxC;AACA,aAAKZ,kCAAkC,CAACa,WAAxC;AACA,aAAKb,kCAAkC,CAACc,eAAxC;AACI,iBAAO,CAAP;AALR;AAOH;;AAED,WAAO,MAAMC,aAAN,CAAoBb,KAApB,EAA2BS,SAA3B,EAAsCR,OAAtC,CAAP;AACH;;AAvCL;AADaH,kC,CAEMY,W,GAAsB,a;AAF5BZ,kC,CAGMa,W,GAAsB,a;AAH5Bb,kC,CAIMc,e,GAA0B,iB;AAJhCd,kC,CAKMgB,mB,GAAgC,CAAC,CAAC,CAAF,EAAK,CAAL,C;AALtChB,kC,CAMMmB,kB,GAA6B,CAAC,C","sourcesContent":["import { RoomObjectVariable } from '../../RoomObjectVariable';\r\nimport { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\r\n\r\nexport class FurnitureVoteMajorityVisualization extends FurnitureAnimatedVisualization\r\n{\r\n    private static ONES_SPRITE: string = 'ones_sprite';\r\n    private static TENS_SPRITE: string = 'tens_sprite';\r\n    private static HUNDREDS_SPRITE: string = 'hundreds_sprite';\r\n    private static HIDE_RESULTS_STATES: number[] = [-1, 1];\r\n    private static HIDE_RESULTS_VALUE: number = -1;\r\n\r\n    protected getFrameNumber(scale: number, layerId: number): number\r\n    {\r\n        const result = this.object.model.getValue<number>(RoomObjectVariable.FURNITURE_VOTE_MAJORITY_RESULT);\r\n        const tag = this.getLayerTag(scale, this.direction, layerId);\r\n\r\n        switch(tag)\r\n        {\r\n            case FurnitureVoteMajorityVisualization.ONES_SPRITE: return (result % 10);\r\n            case FurnitureVoteMajorityVisualization.TENS_SPRITE: return ((result / 10) % 10);\r\n            case FurnitureVoteMajorityVisualization.HUNDREDS_SPRITE: return ((result / 100) % 10);\r\n            default: return super.getFrameNumber(scale, layerId);\r\n        }\r\n    }\r\n\r\n    protected getLayerAlpha(scale: number, direction: number, layerId: number): number\r\n    {\r\n        const result = this.object.model.getValue<number>(RoomObjectVariable.FURNITURE_VOTE_MAJORITY_RESULT);\r\n\r\n        if(((!(FurnitureVoteMajorityVisualization.HIDE_RESULTS_STATES.indexOf(this.object.getState(0)) === -1)) || (result === FurnitureVoteMajorityVisualization.HIDE_RESULTS_VALUE)))\r\n        {\r\n            const tag = this.getLayerTag(scale, direction, layerId);\r\n\r\n            switch(tag)\r\n            {\r\n                case FurnitureVoteMajorityVisualization.ONES_SPRITE:\r\n                case FurnitureVoteMajorityVisualization.TENS_SPRITE:\r\n                case FurnitureVoteMajorityVisualization.HUNDREDS_SPRITE:\r\n                    return 0;\r\n            }\r\n        }\r\n\r\n        return super.getLayerAlpha(scale, direction, layerId);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}