{"ast":null,"code":"import { LegacyWallGeometry } from './LegacyWallGeometry';\nimport { RoomCamera } from './RoomCamera';\nimport { TileObjectMap } from './TileObjectMap';\nexport class RoomInstanceData {\n  constructor(roomId) {\n    this._roomId = void 0;\n    this._modelName = void 0;\n    this._legacyGeometry = void 0;\n    this._tileObjectMap = void 0;\n    this._roomCamera = void 0;\n    this._selectedObject = void 0;\n    this._placedObject = void 0;\n    this._furnitureStackingHeightMap = void 0;\n    this._floorStack = void 0;\n    this._wallStack = void 0;\n    this._mouseButtonCursorOwners = void 0;\n    this._roomId = roomId;\n    this._modelName = null;\n    this._legacyGeometry = new LegacyWallGeometry();\n    this._tileObjectMap = null;\n    this._roomCamera = new RoomCamera();\n    this._selectedObject = null;\n    this._placedObject = null;\n    this._furnitureStackingHeightMap = null;\n    this._floorStack = new Map();\n    this._wallStack = new Map();\n    this._mouseButtonCursorOwners = [];\n  }\n\n  dispose() {\n    return;\n  }\n\n  setModelName(name) {\n    this._modelName = name;\n  }\n\n  setSelectedObject(data) {\n    if (this._selectedObject) {\n      this._selectedObject.dispose();\n    }\n\n    this._selectedObject = data;\n  }\n\n  setPlacedObject(data) {\n    if (this._placedObject) {\n      this._placedObject.dispose();\n    }\n\n    this._placedObject = data;\n  }\n\n  setFurnitureStackingHeightMap(heightMap) {\n    if (this._furnitureStackingHeightMap) this._furnitureStackingHeightMap.dispose();\n    this._furnitureStackingHeightMap = heightMap;\n    if (this._tileObjectMap) this._tileObjectMap.dispose();\n\n    if (this._furnitureStackingHeightMap) {\n      this._tileObjectMap = new TileObjectMap(this._furnitureStackingHeightMap.width, this._furnitureStackingHeightMap.height);\n    }\n  }\n\n  addPendingFurnitureFloor(data) {\n    if (!data) return;\n\n    this._floorStack.delete(data.id);\n\n    this._floorStack.set(data.id, data);\n  }\n\n  removePendingFunitureFloor(id) {\n    const existing = this._floorStack.get(id);\n\n    if (!existing) return null;\n\n    this._floorStack.delete(id);\n\n    return existing;\n  }\n\n  getPendingFurnitureFloor(id) {\n    const existing = this._floorStack.get(id);\n\n    if (!existing) return null;\n\n    this._floorStack.delete(id);\n\n    return existing;\n  }\n\n  getNextPendingFurnitureFloor() {\n    if (!this._floorStack.size) return null;\n\n    const keys = this._floorStack.keys();\n\n    return this.getPendingFurnitureFloor(keys.next().value);\n  }\n\n  addPendingFurnitureWall(data) {\n    if (!data) return;\n\n    this._wallStack.delete(data.id);\n\n    this._wallStack.set(data.id, data);\n  }\n\n  removePendingFurnitureWall(id) {\n    const existing = this._wallStack.get(id);\n\n    if (!existing) return null;\n\n    this._wallStack.delete(id);\n\n    return existing;\n  }\n\n  getPendingFurnitureWall(id) {\n    const existing = this._wallStack.get(id);\n\n    if (!existing) return null;\n\n    this._wallStack.delete(id);\n\n    return existing;\n  }\n\n  getNextPendingFurnitureWall() {\n    if (!this._wallStack.size) return null;\n\n    const keys = this._wallStack.keys();\n\n    return this.getPendingFurnitureWall(keys.next().value);\n  }\n\n  addButtonMouseCursorOwner(k) {\n    const _local_2 = this._mouseButtonCursorOwners.indexOf(k);\n\n    if (_local_2 === -1) {\n      this._mouseButtonCursorOwners.push(k);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  removeButtonMouseCursorOwner(k) {\n    const _local_2 = this._mouseButtonCursorOwners.indexOf(k);\n\n    if (_local_2 > -1) {\n      this._mouseButtonCursorOwners.splice(_local_2, 1);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  hasButtonMouseCursorOwners() {\n    return this._mouseButtonCursorOwners.length > 0;\n  }\n\n  get roomId() {\n    return this._roomId;\n  }\n\n  get modelName() {\n    return this._modelName;\n  }\n\n  get legacyGeometry() {\n    return this._legacyGeometry;\n  }\n\n  get tileObjectMap() {\n    return this._tileObjectMap;\n  }\n\n  get roomCamera() {\n    return this._roomCamera;\n  }\n\n  get selectedObject() {\n    return this._selectedObject;\n  }\n\n  get placedObject() {\n    return this._placedObject;\n  }\n\n  get furnitureStackingHeightMap() {\n    return this._furnitureStackingHeightMap;\n  }\n\n}","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/room/utils/RoomInstanceData.ts"],"names":["LegacyWallGeometry","RoomCamera","TileObjectMap","RoomInstanceData","constructor","roomId","_roomId","_modelName","_legacyGeometry","_tileObjectMap","_roomCamera","_selectedObject","_placedObject","_furnitureStackingHeightMap","_floorStack","_wallStack","_mouseButtonCursorOwners","Map","dispose","setModelName","name","setSelectedObject","data","setPlacedObject","setFurnitureStackingHeightMap","heightMap","width","height","addPendingFurnitureFloor","delete","id","set","removePendingFunitureFloor","existing","get","getPendingFurnitureFloor","getNextPendingFurnitureFloor","size","keys","next","value","addPendingFurnitureWall","removePendingFurnitureWall","getPendingFurnitureWall","getNextPendingFurnitureWall","addButtonMouseCursorOwner","k","_local_2","indexOf","push","removeButtonMouseCursorOwner","splice","hasButtonMouseCursorOwners","length","modelName","legacyGeometry","tileObjectMap","roomCamera","selectedObject","placedObject","furnitureStackingHeightMap"],"mappings":"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","sourcesContent":["import { FurnitureStackingHeightMap } from './FurnitureStackingHeightMap';\r\nimport { LegacyWallGeometry } from './LegacyWallGeometry';\r\nimport { RoomCamera } from './RoomCamera';\r\nimport { RoomFurnitureData } from './RoomFurnitureData';\r\nimport { SelectedRoomObjectData } from './SelectedRoomObjectData';\r\nimport { TileObjectMap } from './TileObjectMap';\r\n\r\nexport class RoomInstanceData\r\n{\r\n    private _roomId: number;\r\n\r\n    private _modelName: string;\r\n    private _legacyGeometry: LegacyWallGeometry;\r\n    private _tileObjectMap: TileObjectMap;\r\n    private _roomCamera: RoomCamera;\r\n    private _selectedObject: SelectedRoomObjectData;\r\n    private _placedObject: SelectedRoomObjectData;\r\n    private _furnitureStackingHeightMap: FurnitureStackingHeightMap;\r\n\r\n    private _floorStack: Map<number, RoomFurnitureData>;\r\n    private _wallStack: Map<number, RoomFurnitureData>;\r\n    private _mouseButtonCursorOwners: string[];\r\n\r\n    constructor(roomId: number)\r\n    {\r\n        this._roomId = roomId;\r\n\r\n        this._modelName = null;\r\n        this._legacyGeometry = new LegacyWallGeometry();\r\n        this._tileObjectMap = null;\r\n        this._roomCamera = new RoomCamera();\r\n        this._selectedObject = null;\r\n        this._placedObject = null;\r\n        this._furnitureStackingHeightMap = null;\r\n\r\n        this._floorStack = new Map();\r\n        this._wallStack = new Map();\r\n        this._mouseButtonCursorOwners = [];\r\n    }\r\n\r\n    public dispose(): void\r\n    {\r\n        return;\r\n    }\r\n\r\n    public setModelName(name: string): void\r\n    {\r\n        this._modelName = name;\r\n    }\r\n\r\n    public setSelectedObject(data: SelectedRoomObjectData): void\r\n    {\r\n        if(this._selectedObject)\r\n        {\r\n            this._selectedObject.dispose();\r\n        }\r\n\r\n        this._selectedObject = data;\r\n    }\r\n\r\n    public setPlacedObject(data: SelectedRoomObjectData): void\r\n    {\r\n        if(this._placedObject)\r\n        {\r\n            this._placedObject.dispose();\r\n        }\r\n\r\n        this._placedObject = data;\r\n    }\r\n\r\n    public setFurnitureStackingHeightMap(heightMap: FurnitureStackingHeightMap): void\r\n    {\r\n        if(this._furnitureStackingHeightMap) this._furnitureStackingHeightMap.dispose();\r\n\r\n        this._furnitureStackingHeightMap = heightMap;\r\n\r\n        if(this._tileObjectMap) this._tileObjectMap.dispose();\r\n\r\n        if(this._furnitureStackingHeightMap)\r\n        {\r\n            this._tileObjectMap = new TileObjectMap(this._furnitureStackingHeightMap.width, this._furnitureStackingHeightMap.height);\r\n        }\r\n    }\r\n\r\n    public addPendingFurnitureFloor(data: RoomFurnitureData): void\r\n    {\r\n        if(!data) return;\r\n\r\n        this._floorStack.delete(data.id);\r\n        this._floorStack.set(data.id, data);\r\n    }\r\n\r\n    public removePendingFunitureFloor(id: number): RoomFurnitureData\r\n    {\r\n        const existing = this._floorStack.get(id);\r\n\r\n        if(!existing) return null;\r\n\r\n        this._floorStack.delete(id);\r\n\r\n        return existing;\r\n    }\r\n\r\n    public getPendingFurnitureFloor(id: number): RoomFurnitureData\r\n    {\r\n        const existing = this._floorStack.get(id);\r\n\r\n        if(!existing) return null;\r\n\r\n        this._floorStack.delete(id);\r\n\r\n        return existing;\r\n    }\r\n\r\n    public getNextPendingFurnitureFloor(): RoomFurnitureData\r\n    {\r\n        if(!this._floorStack.size) return null;\r\n\r\n        const keys = this._floorStack.keys();\r\n\r\n        return this.getPendingFurnitureFloor(keys.next().value as number);\r\n    }\r\n\r\n    public addPendingFurnitureWall(data: RoomFurnitureData): void\r\n    {\r\n        if(!data) return;\r\n\r\n        this._wallStack.delete(data.id);\r\n        this._wallStack.set(data.id, data);\r\n    }\r\n\r\n    public removePendingFurnitureWall(id: number): RoomFurnitureData\r\n    {\r\n        const existing = this._wallStack.get(id);\r\n\r\n        if(!existing) return null;\r\n\r\n        this._wallStack.delete(id);\r\n\r\n        return existing;\r\n    }\r\n\r\n    public getPendingFurnitureWall(id: number): RoomFurnitureData\r\n    {\r\n        const existing = this._wallStack.get(id);\r\n\r\n        if(!existing) return null;\r\n\r\n        this._wallStack.delete(id);\r\n\r\n        return existing;\r\n    }\r\n\r\n    public getNextPendingFurnitureWall(): RoomFurnitureData\r\n    {\r\n        if(!this._wallStack.size) return null;\r\n\r\n        const keys = this._wallStack.keys();\r\n\r\n        return this.getPendingFurnitureWall(keys.next().value as number);\r\n    }\r\n\r\n    public addButtonMouseCursorOwner(k: string): boolean\r\n    {\r\n        const _local_2 = this._mouseButtonCursorOwners.indexOf(k);\r\n\r\n        if(_local_2 === -1)\r\n        {\r\n            this._mouseButtonCursorOwners.push(k);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public removeButtonMouseCursorOwner(k: string): boolean\r\n    {\r\n        const _local_2 = this._mouseButtonCursorOwners.indexOf(k);\r\n\r\n        if(_local_2 > -1)\r\n        {\r\n            this._mouseButtonCursorOwners.splice(_local_2, 1);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public hasButtonMouseCursorOwners(): boolean\r\n    {\r\n        return this._mouseButtonCursorOwners.length > 0;\r\n    }\r\n\r\n    public get roomId(): number\r\n    {\r\n        return this._roomId;\r\n    }\r\n\r\n    public get modelName(): string\r\n    {\r\n        return this._modelName;\r\n    }\r\n\r\n    public get legacyGeometry(): LegacyWallGeometry\r\n    {\r\n        return this._legacyGeometry;\r\n    }\r\n\r\n    public get tileObjectMap(): TileObjectMap\r\n    {\r\n        return this._tileObjectMap;\r\n    }\r\n\r\n    public get roomCamera(): RoomCamera\r\n    {\r\n        return this._roomCamera;\r\n    }\r\n\r\n    public get selectedObject(): SelectedRoomObjectData\r\n    {\r\n        return this._selectedObject;\r\n    }\r\n\r\n    public get placedObject(): SelectedRoomObjectData\r\n    {\r\n        return this._placedObject;\r\n    }\r\n\r\n    public get furnitureStackingHeightMap(): FurnitureStackingHeightMap\r\n    {\r\n        return this._furnitureStackingHeightMap;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}