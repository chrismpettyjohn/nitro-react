{"ast":null,"code":"import { RoomObjectVariable } from '../../RoomObjectVariable';\nimport { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\nexport class FurnitureVoteCounterVisualization extends FurnitureAnimatedVisualization {\n  updateObject(scale, direction) {\n    super.updateObject(scale, direction);\n    return true;\n  }\n\n  getFrameNumber(scale, layerId) {\n    const result = this.object.model.getValue(RoomObjectVariable.FURNITURE_VOTE_COUNTER_COUNT);\n    const tag = this.getLayerTag(scale, this.direction, layerId);\n\n    switch (tag) {\n      case FurnitureVoteCounterVisualization.ONES_SPRITE:\n        return result % 10;\n\n      case FurnitureVoteCounterVisualization.TENS_SPRITE:\n        return result / 10 % 10;\n\n      case FurnitureVoteCounterVisualization.HUNDREDS_SPRITE:\n        return result / 100 % 10;\n\n      default:\n        return super.getFrameNumber(scale, layerId);\n    }\n  }\n\n  getLayerAlpha(scale, direction, layerId) {\n    const result = this.object.model.getValue(RoomObjectVariable.FURNITURE_VOTE_COUNTER_COUNT);\n\n    if (result === FurnitureVoteCounterVisualization.HIDE_COUNTER_SCORE) {\n      const tag = this.getLayerTag(scale, direction, layerId);\n\n      switch (tag) {\n        case FurnitureVoteCounterVisualization.ONES_SPRITE:\n        case FurnitureVoteCounterVisualization.TENS_SPRITE:\n        case FurnitureVoteCounterVisualization.HUNDREDS_SPRITE:\n          return 0;\n      }\n    }\n\n    return super.getLayerAlpha(scale, direction, layerId);\n  }\n\n}\nFurnitureVoteCounterVisualization.ONES_SPRITE = 'ones_sprite';\nFurnitureVoteCounterVisualization.TENS_SPRITE = 'tens_sprite';\nFurnitureVoteCounterVisualization.HUNDREDS_SPRITE = 'hundreds_sprite';\nFurnitureVoteCounterVisualization.HIDE_COUNTER_SCORE = -1;","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/room/object/visualization/furniture/FurnitureVoteCounterVisualization.ts"],"names":["RoomObjectVariable","FurnitureAnimatedVisualization","FurnitureVoteCounterVisualization","updateObject","scale","direction","getFrameNumber","layerId","result","object","model","getValue","FURNITURE_VOTE_COUNTER_COUNT","tag","getLayerTag","ONES_SPRITE","TENS_SPRITE","HUNDREDS_SPRITE","getLayerAlpha","HIDE_COUNTER_SCORE"],"mappings":"AAAA,SAASA,kBAAT,QAAmC,0BAAnC;AACA,SAASC,8BAAT,QAA+C,kCAA/C;AAEA,OAAO,MAAMC,iCAAN,SAAgDD,8BAAhD,CACP;AAMcE,EAAAA,YAAY,CAACC,KAAD,EAAgBC,SAAhB,EACtB;AACI,UAAMF,YAAN,CAAmBC,KAAnB,EAA0BC,SAA1B;AAEA,WAAO,IAAP;AACH;;AAESC,EAAAA,cAAc,CAACF,KAAD,EAAgBG,OAAhB,EACxB;AACI,UAAMC,MAAM,GAAG,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAAmCX,kBAAkB,CAACY,4BAAtD,CAAf;AACA,UAAMC,GAAG,GAAG,KAAKC,WAAL,CAAiBV,KAAjB,EAAwB,KAAKC,SAA7B,EAAwCE,OAAxC,CAAZ;;AAEA,YAAOM,GAAP;AAEI,WAAKX,iCAAiC,CAACa,WAAvC;AAAoD,eAAQP,MAAM,GAAG,EAAjB;;AACpD,WAAKN,iCAAiC,CAACc,WAAvC;AAAoD,eAASR,MAAM,GAAG,EAAV,GAAgB,EAAxB;;AACpD,WAAKN,iCAAiC,CAACe,eAAvC;AAAwD,eAAST,MAAM,GAAG,GAAV,GAAiB,EAAzB;;AACxD;AAAS,eAAO,MAAMF,cAAN,CAAqBF,KAArB,EAA4BG,OAA5B,CAAP;AALb;AAOH;;AAESW,EAAAA,aAAa,CAACd,KAAD,EAAgBC,SAAhB,EAAmCE,OAAnC,EACvB;AACI,UAAMC,MAAM,GAAG,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAAmCX,kBAAkB,CAACY,4BAAtD,CAAf;;AAEA,QAAGJ,MAAM,KAAKN,iCAAiC,CAACiB,kBAAhD,EACA;AACI,YAAMN,GAAG,GAAG,KAAKC,WAAL,CAAiBV,KAAjB,EAAwBC,SAAxB,EAAmCE,OAAnC,CAAZ;;AAEA,cAAOM,GAAP;AAEI,aAAKX,iCAAiC,CAACa,WAAvC;AACA,aAAKb,iCAAiC,CAACc,WAAvC;AACA,aAAKd,iCAAiC,CAACe,eAAvC;AACI,iBAAO,CAAP;AALR;AAOH;;AAED,WAAO,MAAMC,aAAN,CAAoBd,KAApB,EAA2BC,SAA3B,EAAsCE,OAAtC,CAAP;AACH;;AA7CL;AADaL,iC,CAEMa,W,GAAsB,a;AAF5Bb,iC,CAGMc,W,GAAsB,a;AAH5Bd,iC,CAIMe,e,GAA0B,iB;AAJhCf,iC,CAKMiB,kB,GAA6B,CAAC,C","sourcesContent":["import { RoomObjectVariable } from '../../RoomObjectVariable';\r\nimport { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\r\n\r\nexport class FurnitureVoteCounterVisualization extends FurnitureAnimatedVisualization\r\n{\r\n    private static ONES_SPRITE: string = 'ones_sprite';\r\n    private static TENS_SPRITE: string = 'tens_sprite';\r\n    private static HUNDREDS_SPRITE: string = 'hundreds_sprite';\r\n    private static HIDE_COUNTER_SCORE: number = -1;\r\n\r\n    protected updateObject(scale: number, direction: number): boolean\r\n    {\r\n        super.updateObject(scale, direction);\r\n\r\n        return true;\r\n    }\r\n\r\n    protected getFrameNumber(scale: number, layerId: number): number\r\n    {\r\n        const result = this.object.model.getValue<number>(RoomObjectVariable.FURNITURE_VOTE_COUNTER_COUNT);\r\n        const tag = this.getLayerTag(scale, this.direction, layerId);\r\n\r\n        switch(tag)\r\n        {\r\n            case FurnitureVoteCounterVisualization.ONES_SPRITE: return (result % 10);\r\n            case FurnitureVoteCounterVisualization.TENS_SPRITE: return ((result / 10) % 10);\r\n            case FurnitureVoteCounterVisualization.HUNDREDS_SPRITE: return ((result / 100) % 10);\r\n            default: return super.getFrameNumber(scale, layerId);\r\n        }\r\n    }\r\n\r\n    protected getLayerAlpha(scale: number, direction: number, layerId: number): number\r\n    {\r\n        const result = this.object.model.getValue<number>(RoomObjectVariable.FURNITURE_VOTE_COUNTER_COUNT);\r\n\r\n        if(result === FurnitureVoteCounterVisualization.HIDE_COUNTER_SCORE)\r\n        {\r\n            const tag = this.getLayerTag(scale, direction, layerId);\r\n\r\n            switch(tag)\r\n            {\r\n                case FurnitureVoteCounterVisualization.ONES_SPRITE:\r\n                case FurnitureVoteCounterVisualization.TENS_SPRITE:\r\n                case FurnitureVoteCounterVisualization.HUNDREDS_SPRITE:\r\n                    return 0;\r\n            }\r\n        }\r\n\r\n        return super.getLayerAlpha(scale, direction, layerId);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}