{"ast":null,"code":"import { RoomObjectVariable } from '../../RoomObjectVariable';\nimport { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\nexport class FurnitureGuildCustomizedVisualization extends FurnitureAnimatedVisualization {\n  constructor() {\n    super();\n    this._color1 = void 0;\n    this._color2 = void 0;\n    this._badgeAssetNameNormalScale = void 0;\n    this._badgeAssetNameSmallScale = void 0;\n    this._color1 = FurnitureGuildCustomizedVisualization.DEFAULT_COLOR_1;\n    this._color2 = FurnitureGuildCustomizedVisualization.DEFAULT_COLOR_2;\n    this._badgeAssetNameNormalScale = '';\n    this._badgeAssetNameSmallScale = '';\n  }\n\n  updateModel(scale) {\n    const flag = super.updateModel(scale);\n\n    if (this._badgeAssetNameNormalScale === '') {\n      const assetName = this.object.model.getValue(RoomObjectVariable.FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME);\n\n      if (assetName) {\n        this._badgeAssetNameNormalScale = assetName;\n        this._badgeAssetNameSmallScale = this._badgeAssetNameNormalScale + '_32';\n      }\n    }\n\n    const color1 = this.object.model.getValue(RoomObjectVariable.FURNITURE_GUILD_CUSTOMIZED_COLOR_1);\n    this._color1 = color1 ? color1 : FurnitureGuildCustomizedVisualization.DEFAULT_COLOR_1;\n    const color2 = this.object.model.getValue(RoomObjectVariable.FURNITURE_GUILD_CUSTOMIZED_COLOR_2);\n    this._color2 = color2 ? color2 : FurnitureGuildCustomizedVisualization.DEFAULT_COLOR_2;\n    return flag;\n  }\n\n  getLayerColor(scale, layerId, colorId) {\n    const tag = this.getLayerTag(scale, this._direction, layerId);\n\n    switch (tag) {\n      case FurnitureGuildCustomizedVisualization.PRIMARY_COLOUR_SPRITE_TAG:\n        return this._color1;\n\n      case FurnitureGuildCustomizedVisualization.SECONDARY_COLOUR_SPRITE_TAG:\n        return this._color2;\n    }\n\n    return super.getLayerColor(scale, layerId, colorId);\n  }\n\n  getSpriteAssetName(scale, layerId) {\n    const tag = this.getLayerTag(scale, this._direction, layerId);\n\n    if (tag === FurnitureGuildCustomizedVisualization.BADGE) {\n      if (scale === 32) return this._badgeAssetNameSmallScale;\n      return this._badgeAssetNameNormalScale;\n    }\n\n    return super.getSpriteAssetName(scale, layerId);\n  }\n\n  getLibraryAssetNameForSprite(asset, sprite) {\n    if (sprite.tag === FurnitureGuildCustomizedVisualization.BADGE) {\n      return '%group.badge.url%' + sprite.libraryAssetName.replace('badge_', '');\n    }\n\n    return super.getLibraryAssetNameForSprite(asset, sprite);\n  }\n\n}\nFurnitureGuildCustomizedVisualization.PRIMARY_COLOUR_SPRITE_TAG = 'COLOR1';\nFurnitureGuildCustomizedVisualization.SECONDARY_COLOUR_SPRITE_TAG = 'COLOR2';\nFurnitureGuildCustomizedVisualization.BADGE = 'BADGE';\nFurnitureGuildCustomizedVisualization.DEFAULT_COLOR_1 = 0xEEEEEE;\nFurnitureGuildCustomizedVisualization.DEFAULT_COLOR_2 = 0x4B4B4B;","map":{"version":3,"sources":["/var/www/game.bobba.ca/node_modules/@nitrots/nitro-renderer/src/nitro/room/object/visualization/furniture/FurnitureGuildCustomizedVisualization.ts"],"names":["RoomObjectVariable","FurnitureAnimatedVisualization","FurnitureGuildCustomizedVisualization","constructor","_color1","_color2","_badgeAssetNameNormalScale","_badgeAssetNameSmallScale","DEFAULT_COLOR_1","DEFAULT_COLOR_2","updateModel","scale","flag","assetName","object","model","getValue","FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME","color1","FURNITURE_GUILD_CUSTOMIZED_COLOR_1","color2","FURNITURE_GUILD_CUSTOMIZED_COLOR_2","getLayerColor","layerId","colorId","tag","getLayerTag","_direction","PRIMARY_COLOUR_SPRITE_TAG","SECONDARY_COLOUR_SPRITE_TAG","getSpriteAssetName","BADGE","getLibraryAssetNameForSprite","asset","sprite","libraryAssetName","replace"],"mappings":"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","sourcesContent":["import { IGraphicAsset, IRoomObjectSprite } from '../../../../../room';\r\nimport { RoomObjectVariable } from '../../RoomObjectVariable';\r\nimport { FurnitureAnimatedVisualization } from './FurnitureAnimatedVisualization';\r\n\r\nexport class FurnitureGuildCustomizedVisualization extends FurnitureAnimatedVisualization\r\n{\r\n    public static PRIMARY_COLOUR_SPRITE_TAG: string = 'COLOR1';\r\n    public static SECONDARY_COLOUR_SPRITE_TAG: string = 'COLOR2';\r\n    public static BADGE: string = 'BADGE';\r\n    public static DEFAULT_COLOR_1: number = 0xEEEEEE;\r\n    public static DEFAULT_COLOR_2: number = 0x4B4B4B;\r\n\r\n    private _color1: number;\r\n    private _color2: number;\r\n    private _badgeAssetNameNormalScale: string;\r\n    private _badgeAssetNameSmallScale: string;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n\r\n        this._color1 = FurnitureGuildCustomizedVisualization.DEFAULT_COLOR_1;\r\n        this._color2 = FurnitureGuildCustomizedVisualization.DEFAULT_COLOR_2;\r\n        this._badgeAssetNameNormalScale = '';\r\n        this._badgeAssetNameSmallScale = '';\r\n    }\r\n\r\n    protected updateModel(scale: number): boolean\r\n    {\r\n        const flag = super.updateModel(scale);\r\n\r\n        if(this._badgeAssetNameNormalScale === '')\r\n        {\r\n            const assetName = this.object.model.getValue<string>(RoomObjectVariable.FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME);\r\n\r\n            if(assetName)\r\n            {\r\n                this._badgeAssetNameNormalScale = assetName;\r\n                this._badgeAssetNameSmallScale = (this._badgeAssetNameNormalScale + '_32');\r\n            }\r\n        }\r\n\r\n        const color1 = this.object.model.getValue<number>(RoomObjectVariable.FURNITURE_GUILD_CUSTOMIZED_COLOR_1);\r\n\r\n        this._color1 = color1 ? color1: FurnitureGuildCustomizedVisualization.DEFAULT_COLOR_1;\r\n\r\n        const color2 = this.object.model.getValue<number>(RoomObjectVariable.FURNITURE_GUILD_CUSTOMIZED_COLOR_2);\r\n\r\n        this._color2 = color2 ? color2: FurnitureGuildCustomizedVisualization.DEFAULT_COLOR_2;\r\n\r\n        return flag;\r\n    }\r\n\r\n    protected getLayerColor(scale: number, layerId: number, colorId: number): number\r\n    {\r\n        const tag = this.getLayerTag(scale, this._direction, layerId);\r\n\r\n        switch(tag)\r\n        {\r\n            case FurnitureGuildCustomizedVisualization.PRIMARY_COLOUR_SPRITE_TAG: return this._color1;\r\n            case FurnitureGuildCustomizedVisualization.SECONDARY_COLOUR_SPRITE_TAG: return this._color2;\r\n        }\r\n\r\n        return super.getLayerColor(scale, layerId, colorId);\r\n    }\r\n\r\n    public getSpriteAssetName(scale: number, layerId: number): string\r\n    {\r\n        const tag = this.getLayerTag(scale, this._direction, layerId);\r\n\r\n        if(tag === FurnitureGuildCustomizedVisualization.BADGE)\r\n        {\r\n            if(scale === 32) return this._badgeAssetNameSmallScale;\r\n\r\n            return this._badgeAssetNameNormalScale;\r\n        }\r\n\r\n        return super.getSpriteAssetName(scale, layerId);\r\n    }\r\n\r\n    protected getLibraryAssetNameForSprite(asset: IGraphicAsset, sprite: IRoomObjectSprite): string\r\n    {\r\n        if(sprite.tag === FurnitureGuildCustomizedVisualization.BADGE)\r\n        {\r\n            return '%group.badge.url%' + sprite.libraryAssetName.replace('badge_', '');\r\n        }\r\n\r\n        return super.getLibraryAssetNameForSprite(asset, sprite);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}